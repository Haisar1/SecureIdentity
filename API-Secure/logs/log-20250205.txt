2025-02-05 14:21:10.185 -05:00 [WRN] Storing keys in a directory 'C:\Users\ContainerAdministrator\AppData\Local\ASP.NET\DataProtection-Keys' that may not be persisted outside of the container. Protected data will be unavailable when container is destroyed. For more information go to https://aka.ms/aspnet/dataprotectionwarning
2025-02-05 14:21:10.241 -05:00 [INF] User profile is available. Using 'C:\Users\ContainerAdministrator\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-05 14:21:10.261 -05:00 [INF] Creating key {9f52508b-7f82-45b6-b669-b8734ddc7751} with creation date 2025-02-05 19:21:10Z, activation date 2025-02-05 19:21:10Z, and expiration date 2025-05-06 19:21:10Z.
2025-02-05 14:21:10.286 -05:00 [INF] Writing data to file 'C:\Users\ContainerAdministrator\AppData\Local\ASP.NET\DataProtection-Keys\key-9f52508b-7f82-45b6-b669-b8734ddc7751.xml'.
2025-02-05 14:21:10.474 -05:00 [INF] Now listening on: http://[::]:8080
2025-02-05 14:21:10.479 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-05 14:21:10.480 -05:00 [INF] Hosting environment: Development
2025-02-05 14:21:10.481 -05:00 [INF] Content root path: C:\app
2025-02-05 14:48:42.058 -05:00 [WRN] Storing keys in a directory 'C:\Users\ContainerAdministrator\AppData\Local\ASP.NET\DataProtection-Keys' that may not be persisted outside of the container. Protected data will be unavailable when container is destroyed. For more information go to https://aka.ms/aspnet/dataprotectionwarning
2025-02-05 14:48:42.119 -05:00 [INF] User profile is available. Using 'C:\Users\ContainerAdministrator\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-05 14:48:42.145 -05:00 [INF] Creating key {7b8df056-a6d7-4dab-b144-4de54ffb4eea} with creation date 2025-02-05 19:48:42Z, activation date 2025-02-05 19:48:42Z, and expiration date 2025-05-06 19:48:42Z.
2025-02-05 14:48:42.168 -05:00 [INF] Writing data to file 'C:\Users\ContainerAdministrator\AppData\Local\ASP.NET\DataProtection-Keys\key-7b8df056-a6d7-4dab-b144-4de54ffb4eea.xml'.
2025-02-05 14:48:42.337 -05:00 [INF] Now listening on: http://[::]:8080
2025-02-05 14:48:42.341 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-05 14:48:42.342 -05:00 [INF] Hosting environment: Development
2025-02-05 14:48:42.343 -05:00 [INF] Content root path: C:\app
2025-02-05 14:54:33.590 -05:00 [INF] User profile is available. Using 'C:\Users\Developer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-05 14:54:33.862 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/weatherforecast - null null
2025-02-05 14:54:33.927 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-05 14:54:33.928 -05:00 [INF] Hosting environment: Development
2025-02-05 14:54:33.928 -05:00 [INF] Content root path: C:\Users\Developer\source\repos\API-Secure
2025-02-05 14:54:34.595 -05:00 [INF] HTTP GET /weatherforecast responded 404 in 62.2754 ms
2025-02-05 14:54:34.616 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/weatherforecast - 404 null null 755.7744ms
2025-02-05 14:54:34.621 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5925/weatherforecast, Response status code: 404
2025-02-05 14:54:38.644 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/swagger/index.html - null null
2025-02-05 14:54:38.736 -05:00 [INF] HTTP GET /swagger/index.html responded 200 in 88.5433 ms
2025-02-05 14:54:38.737 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/swagger/index.html - 200 null text/html;charset=utf-8 93.7018ms
2025-02-05 14:54:38.763 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/_framework/aspnetcore-browser-refresh.js - null null
2025-02-05 14:54:38.765 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/swagger/index.js - null null
2025-02-05 14:54:38.768 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 4.0012ms
2025-02-05 14:54:38.769 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/_vs/browserLink - null null
2025-02-05 14:54:38.770 -05:00 [INF] HTTP GET /swagger/index.js responded 200 in 4.8307 ms
2025-02-05 14:54:38.772 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/swagger/index.js - 200 null application/javascript;charset=utf-8 6.8043ms
2025-02-05 14:54:39.635 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/_vs/browserLink - 200 null text/javascript; charset=UTF-8 865.5988ms
2025-02-05 14:54:39.683 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/swagger/v1/swagger.json - null null
2025-02-05 14:54:39.694 -05:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 10.7356 ms
2025-02-05 14:54:39.694 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.2925ms
2025-02-05 14:57:44.122 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/login - null null
2025-02-05 14:57:44.131 -05:00 [INF] CORS policy execution successful.
2025-02-05 14:57:44.134 -05:00 [INF] HTTP OPTIONS /api/Control/login responded 204 in 9.3517 ms
2025-02-05 14:57:44.135 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/login - 204 null null 12.4177ms
2025-02-05 14:57:44.141 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5925/api/Control/login - application/json 43
2025-02-05 14:57:44.143 -05:00 [INF] CORS policy execution successful.
2025-02-05 14:57:44.224 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/5/2025 6:01:25 PM', Current time (UTC): '2/5/2025 7:57:44 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-05 14:57:44.268 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/5/2025 6:01:25 PM', Current time (UTC): '2/5/2025 7:57:44 PM'.
2025-02-05 14:57:44.269 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.Login (API-Secure)'
2025-02-05 14:57:44.303 -05:00 [INF] Route matched with {action = "Login", controller = "Control"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(API_Secure.Models.DTO.Login) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 14:57:44.546 -05:00 [INF] Intentando iniciar sesi贸n con el usuario: PEDRO
2025-02-05 14:57:45.069 -05:00 [INF] Iniciando proceso de encriptaci贸n SHA256.
2025-02-05 14:57:45.070 -05:00 [INF] Encriptaci贸n exitosa.
2025-02-05 14:57:45.783 -05:00 [INF] Executed DbCommand (82ms) [Parameters=[@__encriptarSHA256_0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Identificador], [u].[FechaCreacion], [u].[Pass], [u].[Usuario]
FROM [Usuario] AS [u]
WHERE [u].[Pass] = @__encriptarSHA256_0
2025-02-05 14:57:45.854 -05:00 [INF] Inicio de sesi贸n exitoso para el usuario: PEDRO
2025-02-05 14:57:45.854 -05:00 [INF] Generando JWT para el usuario: PEDRO
2025-02-05 14:57:45.863 -05:00 [INF] JWT generado exitosamente.
2025-02-05 14:57:45.867 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 14:57:45.876 -05:00 [INF] Executed action API_Secure.Controllers.Control.Login (API-Secure) in 1569.2604ms
2025-02-05 14:57:45.877 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.Login (API-Secure)'
2025-02-05 14:57:45.879 -05:00 [INF] HTTP POST /api/Control/login responded 200 in 1736.4613 ms
2025-02-05 14:57:45.885 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5925/api/Control/login - 200 null application/json; charset=utf-8 1744.2853ms
2025-02-05 14:57:45.887 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2MDY1fQ.4uh92pPdh63QvO2GaqWaAltTDymWAEMLeYCI1zqt7AE - null null
2025-02-05 14:57:45.889 -05:00 [INF] CORS policy execution successful.
2025-02-05 14:57:45.889 -05:00 [INF] HTTP OPTIONS /api/Control/ValidarToken responded 204 in 0.2106 ms
2025-02-05 14:57:45.889 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2MDY1fQ.4uh92pPdh63QvO2GaqWaAltTDymWAEMLeYCI1zqt7AE - 204 null null 1.8798ms
2025-02-05 14:57:45.892 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2MDY1fQ.4uh92pPdh63QvO2GaqWaAltTDymWAEMLeYCI1zqt7AE - null null
2025-02-05 14:57:45.892 -05:00 [INF] CORS policy execution successful.
2025-02-05 14:57:45.902 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 14:57:45.905 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 14:57:45.911 -05:00 [INF] Validando token JWT.
2025-02-05 14:57:45.912 -05:00 [INF] Validando token JWT.
2025-02-05 14:57:45.930 -05:00 [INF] Token validado exitosamente.
2025-02-05 14:57:45.930 -05:00 [INF] Token validado exitosamente.
2025-02-05 14:57:45.930 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 14:57:45.932 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 26.3822ms
2025-02-05 14:57:45.932 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 14:57:45.932 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 40.3549 ms
2025-02-05 14:57:45.933 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2MDY1fQ.4uh92pPdh63QvO2GaqWaAltTDymWAEMLeYCI1zqt7AE - 200 null application/json; charset=utf-8 41.0578ms
2025-02-05 14:57:45.965 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - null null
2025-02-05 14:57:45.965 -05:00 [INF] CORS policy execution successful.
2025-02-05 14:57:45.965 -05:00 [INF] HTTP OPTIONS /api/personas/Lista responded 204 in 0.2525 ms
2025-02-05 14:57:45.966 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - 204 null null 1.3462ms
2025-02-05 14:57:45.970 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/personas/Lista - null null
2025-02-05 14:57:45.972 -05:00 [INF] CORS policy execution successful.
2025-02-05 14:57:45.979 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 14:57:45.984 -05:00 [INF] Route matched with {action = "Lista", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Lista(Int32, Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 14:57:45.991 -05:00 [INF] Obteniendo lista de personas.
2025-02-05 14:57:46.045 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[p0='?' (DbType = Int32), p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC ConsultarPersonas @PageNumber = @p0, @PageSize = @p1
2025-02-05 14:57:46.070 -05:00 [INF] Lista de personas obtenida exitosamente.
2025-02-05 14:57:46.070 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[API_Secure.Models.Persona, API-Secure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-05 14:57:46.079 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Lista (API-Secure) in 94.556ms
2025-02-05 14:57:46.079 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 14:57:46.079 -05:00 [INF] HTTP GET /api/personas/Lista responded 200 in 107.5207 ms
2025-02-05 14:57:46.080 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/personas/Lista - 200 null application/json; charset=utf-8 109.4462ms
2025-02-05 14:58:31.836 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2MDY1fQ.4uh92pPdh63QvO2GaqWaAltTDymWAEMLeYCI1zqt7AE - null null
2025-02-05 14:58:31.837 -05:00 [INF] CORS policy execution successful.
2025-02-05 14:58:31.837 -05:00 [INF] HTTP OPTIONS /api/Control/ValidarToken responded 204 in 0.3680 ms
2025-02-05 14:58:31.838 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2MDY1fQ.4uh92pPdh63QvO2GaqWaAltTDymWAEMLeYCI1zqt7AE - 204 null null 1.7318ms
2025-02-05 14:58:31.841 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2MDY1fQ.4uh92pPdh63QvO2GaqWaAltTDymWAEMLeYCI1zqt7AE - null null
2025-02-05 14:58:31.841 -05:00 [INF] CORS policy execution successful.
2025-02-05 14:58:31.842 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 14:58:31.843 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 14:58:31.845 -05:00 [INF] Validando token JWT.
2025-02-05 14:58:31.845 -05:00 [INF] Validando token JWT.
2025-02-05 14:58:31.846 -05:00 [INF] Token validado exitosamente.
2025-02-05 14:58:31.846 -05:00 [INF] Token validado exitosamente.
2025-02-05 14:58:31.846 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 14:58:31.847 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 3.6397ms
2025-02-05 14:58:31.847 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 14:58:31.847 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 6.0197 ms
2025-02-05 14:58:31.848 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2MDY1fQ.4uh92pPdh63QvO2GaqWaAltTDymWAEMLeYCI1zqt7AE - 200 null application/json; charset=utf-8 6.5815ms
2025-02-05 14:58:31.879 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - null null
2025-02-05 14:58:31.880 -05:00 [INF] CORS policy execution successful.
2025-02-05 14:58:31.880 -05:00 [INF] HTTP OPTIONS /api/personas/Lista responded 204 in 0.1810 ms
2025-02-05 14:58:31.880 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - 204 null null 0.87ms
2025-02-05 14:58:31.883 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/personas/Lista - null null
2025-02-05 14:58:31.884 -05:00 [INF] CORS policy execution successful.
2025-02-05 14:58:31.887 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 14:58:31.887 -05:00 [INF] Route matched with {action = "Lista", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Lista(Int32, Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 14:58:31.888 -05:00 [INF] Obteniendo lista de personas.
2025-02-05 14:58:32.006 -05:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Int32), p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC ConsultarPersonas @PageNumber = @p0, @PageSize = @p1
2025-02-05 14:58:32.007 -05:00 [INF] Lista de personas obtenida exitosamente.
2025-02-05 14:58:32.007 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[API_Secure.Models.Persona, API-Secure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-05 14:58:32.008 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Lista (API-Secure) in 120.3384ms
2025-02-05 14:58:32.009 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 14:58:32.009 -05:00 [INF] HTTP GET /api/personas/Lista responded 200 in 124.8097 ms
2025-02-05 14:58:32.009 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/personas/Lista - 200 null application/json; charset=utf-8 126.5521ms
2025-02-05 14:59:07.959 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2MDY1fQ.4uh92pPdh63QvO2GaqWaAltTDymWAEMLeYCI1zqt7AE - null null
2025-02-05 14:59:07.959 -05:00 [INF] CORS policy execution successful.
2025-02-05 14:59:07.960 -05:00 [INF] HTTP OPTIONS /api/Control/ValidarToken responded 204 in 0.2257 ms
2025-02-05 14:59:07.960 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2MDY1fQ.4uh92pPdh63QvO2GaqWaAltTDymWAEMLeYCI1zqt7AE - 204 null null 1.1908ms
2025-02-05 14:59:07.962 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2MDY1fQ.4uh92pPdh63QvO2GaqWaAltTDymWAEMLeYCI1zqt7AE - null null
2025-02-05 14:59:07.963 -05:00 [INF] CORS policy execution successful.
2025-02-05 14:59:07.963 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 14:59:07.963 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 14:59:07.965 -05:00 [INF] Validando token JWT.
2025-02-05 14:59:07.965 -05:00 [INF] Validando token JWT.
2025-02-05 14:59:07.965 -05:00 [INF] Token validado exitosamente.
2025-02-05 14:59:07.965 -05:00 [INF] Token validado exitosamente.
2025-02-05 14:59:07.966 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 14:59:07.966 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 2.1367ms
2025-02-05 14:59:07.966 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 14:59:07.966 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 3.5075 ms
2025-02-05 14:59:07.966 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2MDY1fQ.4uh92pPdh63QvO2GaqWaAltTDymWAEMLeYCI1zqt7AE - 200 null application/json; charset=utf-8 3.8721ms
2025-02-05 14:59:08.000 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - null null
2025-02-05 14:59:08.000 -05:00 [INF] CORS policy execution successful.
2025-02-05 14:59:08.000 -05:00 [INF] HTTP OPTIONS /api/personas/Lista responded 204 in 0.4349 ms
2025-02-05 14:59:08.001 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - 204 null null 0.8756ms
2025-02-05 14:59:08.003 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/personas/Lista - null null
2025-02-05 14:59:08.003 -05:00 [INF] CORS policy execution successful.
2025-02-05 14:59:08.005 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 14:59:08.005 -05:00 [INF] Route matched with {action = "Lista", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Lista(Int32, Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 14:59:08.006 -05:00 [INF] Obteniendo lista de personas.
2025-02-05 14:59:08.008 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[p0='?' (DbType = Int32), p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC ConsultarPersonas @PageNumber = @p0, @PageSize = @p1
2025-02-05 14:59:08.009 -05:00 [INF] Lista de personas obtenida exitosamente.
2025-02-05 14:59:08.009 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[API_Secure.Models.Persona, API-Secure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-05 14:59:08.010 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Lista (API-Secure) in 4.6681ms
2025-02-05 14:59:08.010 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 14:59:08.010 -05:00 [INF] HTTP GET /api/personas/Lista responded 200 in 6.7986 ms
2025-02-05 14:59:08.010 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/personas/Lista - 200 null application/json; charset=utf-8 7.2312ms
2025-02-05 14:59:46.776 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2MDY1fQ.4uh92pPdh63QvO2GaqWaAltTDymWAEMLeYCI1zqt7AE - null null
2025-02-05 14:59:46.776 -05:00 [INF] CORS policy execution successful.
2025-02-05 14:59:46.776 -05:00 [INF] HTTP OPTIONS /api/Control/ValidarToken responded 204 in 0.1592 ms
2025-02-05 14:59:46.776 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2MDY1fQ.4uh92pPdh63QvO2GaqWaAltTDymWAEMLeYCI1zqt7AE - 204 null null 0.7644ms
2025-02-05 14:59:46.779 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2MDY1fQ.4uh92pPdh63QvO2GaqWaAltTDymWAEMLeYCI1zqt7AE - null null
2025-02-05 14:59:46.780 -05:00 [INF] CORS policy execution successful.
2025-02-05 14:59:46.782 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 14:59:46.782 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 14:59:46.782 -05:00 [INF] Validando token JWT.
2025-02-05 14:59:46.782 -05:00 [INF] Validando token JWT.
2025-02-05 14:59:46.783 -05:00 [INF] Token validado exitosamente.
2025-02-05 14:59:46.783 -05:00 [INF] Token validado exitosamente.
2025-02-05 14:59:46.783 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 14:59:46.784 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 2.1492ms
2025-02-05 14:59:46.784 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 14:59:46.784 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 4.4939 ms
2025-02-05 14:59:46.785 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2MDY1fQ.4uh92pPdh63QvO2GaqWaAltTDymWAEMLeYCI1zqt7AE - 200 null application/json; charset=utf-8 4.9682ms
2025-02-05 14:59:46.823 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - null null
2025-02-05 14:59:46.823 -05:00 [INF] CORS policy execution successful.
2025-02-05 14:59:46.823 -05:00 [INF] HTTP OPTIONS /api/personas/Lista responded 204 in 0.3963 ms
2025-02-05 14:59:46.824 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - 204 null null 1.2791ms
2025-02-05 14:59:46.826 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/personas/Lista - null null
2025-02-05 14:59:46.826 -05:00 [INF] CORS policy execution successful.
2025-02-05 14:59:46.826 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 14:59:46.826 -05:00 [INF] Route matched with {action = "Lista", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Lista(Int32, Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 14:59:46.827 -05:00 [INF] Obteniendo lista de personas.
2025-02-05 14:59:46.836 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[p0='?' (DbType = Int32), p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC ConsultarPersonas @PageNumber = @p0, @PageSize = @p1
2025-02-05 14:59:46.837 -05:00 [INF] Lista de personas obtenida exitosamente.
2025-02-05 14:59:46.837 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[API_Secure.Models.Persona, API-Secure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-05 14:59:46.837 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Lista (API-Secure) in 10.9194ms
2025-02-05 14:59:46.838 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 14:59:46.838 -05:00 [INF] HTTP GET /api/personas/Lista responded 200 in 11.8628 ms
2025-02-05 14:59:46.838 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/personas/Lista - 200 null application/json; charset=utf-8 12.261ms
2025-02-05 15:10:34.822 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/login - null null
2025-02-05 15:10:34.823 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:10:34.823 -05:00 [INF] HTTP OPTIONS /api/Control/login responded 204 in 0.1835 ms
2025-02-05 15:10:34.823 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/login - 204 null null 0.7573ms
2025-02-05 15:10:34.825 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5925/api/Control/login - application/json 43
2025-02-05 15:10:34.825 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:10:34.826 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/5/2025 8:07:45 PM', Current time (UTC): '2/5/2025 8:10:34 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-05 15:10:34.827 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/5/2025 8:07:45 PM', Current time (UTC): '2/5/2025 8:10:34 PM'.
2025-02-05 15:10:34.827 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.Login (API-Secure)'
2025-02-05 15:10:34.827 -05:00 [INF] Route matched with {action = "Login", controller = "Control"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(API_Secure.Models.DTO.Login) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:10:34.828 -05:00 [INF] Intentando iniciar sesi贸n con el usuario: PEDRO
2025-02-05 15:10:34.830 -05:00 [INF] Iniciando proceso de encriptaci贸n SHA256.
2025-02-05 15:10:34.830 -05:00 [INF] Encriptaci贸n exitosa.
2025-02-05 15:10:34.850 -05:00 [INF] Executed DbCommand (11ms) [Parameters=[@__encriptarSHA256_0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Identificador], [u].[FechaCreacion], [u].[Pass], [u].[Usuario]
FROM [Usuario] AS [u]
WHERE [u].[Pass] = @__encriptarSHA256_0
2025-02-05 15:10:34.850 -05:00 [INF] Inicio de sesi贸n exitoso para el usuario: PEDRO
2025-02-05 15:10:34.850 -05:00 [INF] Generando JWT para el usuario: PEDRO
2025-02-05 15:10:34.851 -05:00 [INF] JWT generado exitosamente.
2025-02-05 15:10:34.851 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:10:34.851 -05:00 [INF] Executed action API_Secure.Controllers.Control.Login (API-Secure) in 23.8723ms
2025-02-05 15:10:34.851 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.Login (API-Secure)'
2025-02-05 15:10:34.851 -05:00 [INF] HTTP POST /api/Control/login responded 200 in 25.8531 ms
2025-02-05 15:10:34.851 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5925/api/Control/login - 200 null application/json; charset=utf-8 26.1576ms
2025-02-05 15:10:34.859 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2ODM0fQ.PRkkCua2XdSNoSi_UWbH_lmegvTT_GPFMmY4Hdj9p_w - null null
2025-02-05 15:10:34.859 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:10:34.859 -05:00 [INF] HTTP OPTIONS /api/Control/ValidarToken responded 204 in 0.0942 ms
2025-02-05 15:10:34.859 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2ODM0fQ.PRkkCua2XdSNoSi_UWbH_lmegvTT_GPFMmY4Hdj9p_w - 204 null null 0.3874ms
2025-02-05 15:10:34.862 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2ODM0fQ.PRkkCua2XdSNoSi_UWbH_lmegvTT_GPFMmY4Hdj9p_w - null null
2025-02-05 15:10:34.862 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:10:34.862 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:10:34.862 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:10:34.863 -05:00 [INF] Validando token JWT.
2025-02-05 15:10:34.863 -05:00 [INF] Validando token JWT.
2025-02-05 15:10:34.863 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:10:34.863 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:10:34.863 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:10:34.863 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 1.0052ms
2025-02-05 15:10:34.863 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:10:34.864 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 1.7272 ms
2025-02-05 15:10:34.864 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2ODM0fQ.PRkkCua2XdSNoSi_UWbH_lmegvTT_GPFMmY4Hdj9p_w - 200 null application/json; charset=utf-8 2.0178ms
2025-02-05 15:10:34.892 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:10:34.892 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:10:34.892 -05:00 [INF] HTTP OPTIONS /api/personas/Lista responded 204 in 0.1352 ms
2025-02-05 15:10:34.893 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - 204 null null 0.6247ms
2025-02-05 15:10:34.895 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:10:34.896 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:10:34.896 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:10:34.896 -05:00 [INF] Route matched with {action = "Lista", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Lista(Int32, Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:10:34.897 -05:00 [INF] Obteniendo lista de personas.
2025-02-05 15:10:34.905 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[p0='?' (DbType = Int32), p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC ConsultarPersonas @PageNumber = @p0, @PageSize = @p1
2025-02-05 15:10:34.906 -05:00 [INF] Lista de personas obtenida exitosamente.
2025-02-05 15:10:34.906 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[API_Secure.Models.Persona, API-Secure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-05 15:10:34.907 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Lista (API-Secure) in 10.3387ms
2025-02-05 15:10:34.907 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:10:34.907 -05:00 [INF] HTTP GET /api/personas/Lista responded 200 in 11.4624 ms
2025-02-05 15:10:34.907 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/personas/Lista - 200 null application/json; charset=utf-8 12.0795ms
2025-02-05 15:10:48.529 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/1 - null null
2025-02-05 15:10:48.529 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:10:48.529 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/1 responded 204 in 0.3527 ms
2025-02-05 15:10:48.530 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/1 - 204 null null 0.852ms
2025-02-05 15:10:48.532 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/1 - application/json 280
2025-02-05 15:10:48.532 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:10:48.533 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:10:48.537 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:10:48.548 -05:00 [INF] Actualizando persona con ID: 1
2025-02-05 15:10:48.582 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:10:48.671 -05:00 [INF] Executed DbCommand (10ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:10:48.686 -05:00 [INF] Persona con ID 1 Actualizada exitosamente.
2025-02-05 15:10:48.686 -05:00 [INF] Executing OkObjectResult, writing value of type 'API_Secure.Models.Persona'.
2025-02-05 15:10:48.687 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 149.2757ms
2025-02-05 15:10:48.687 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:10:48.687 -05:00 [INF] HTTP PUT /api/personas/Actualizar/1 responded 200 in 154.6647 ms
2025-02-05 15:10:48.687 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/1 - 200 null application/json; charset=utf-8 155.2046ms
2025-02-05 15:10:53.488 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2ODM0fQ.PRkkCua2XdSNoSi_UWbH_lmegvTT_GPFMmY4Hdj9p_w - null null
2025-02-05 15:10:53.488 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:10:53.489 -05:00 [INF] HTTP OPTIONS /api/Control/ValidarToken responded 204 in 0.2368 ms
2025-02-05 15:10:53.489 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2ODM0fQ.PRkkCua2XdSNoSi_UWbH_lmegvTT_GPFMmY4Hdj9p_w - 204 null null 1.4598ms
2025-02-05 15:10:53.492 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2ODM0fQ.PRkkCua2XdSNoSi_UWbH_lmegvTT_GPFMmY4Hdj9p_w - null null
2025-02-05 15:10:53.492 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:10:53.493 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:10:53.493 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:10:53.494 -05:00 [INF] Validando token JWT.
2025-02-05 15:10:53.494 -05:00 [INF] Validando token JWT.
2025-02-05 15:10:53.495 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:10:53.495 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:10:53.495 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:10:53.495 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 1.8609ms
2025-02-05 15:10:53.495 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:10:53.495 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 3.4625 ms
2025-02-05 15:10:53.496 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2ODM0fQ.PRkkCua2XdSNoSi_UWbH_lmegvTT_GPFMmY4Hdj9p_w - 200 null application/json; charset=utf-8 3.8619ms
2025-02-05 15:10:53.538 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:10:53.538 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:10:53.539 -05:00 [INF] HTTP OPTIONS /api/personas/Lista responded 204 in 0.2575 ms
2025-02-05 15:10:53.539 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - 204 null null 0.826ms
2025-02-05 15:10:53.541 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:10:53.541 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:10:53.542 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:10:53.542 -05:00 [INF] Route matched with {action = "Lista", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Lista(Int32, Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:10:53.543 -05:00 [INF] Obteniendo lista de personas.
2025-02-05 15:10:53.544 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[p0='?' (DbType = Int32), p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC ConsultarPersonas @PageNumber = @p0, @PageSize = @p1
2025-02-05 15:10:53.545 -05:00 [INF] Lista de personas obtenida exitosamente.
2025-02-05 15:10:53.545 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[API_Secure.Models.Persona, API-Secure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-05 15:10:53.545 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Lista (API-Secure) in 3.2288ms
2025-02-05 15:10:53.545 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:10:53.546 -05:00 [INF] HTTP GET /api/personas/Lista responded 200 in 4.7337 ms
2025-02-05 15:10:53.546 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/personas/Lista - 200 null application/json; charset=utf-8 5.128ms
2025-02-05 15:11:18.027 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/1 - null null
2025-02-05 15:11:18.027 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:11:18.030 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/1 responded 204 in 3.1184 ms
2025-02-05 15:11:18.031 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/1 - 204 null null 4.5153ms
2025-02-05 15:11:18.035 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/1 - application/json 274
2025-02-05 15:11:18.036 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:11:18.037 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:11:18.037 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:11:18.038 -05:00 [INF] Actualizando persona con ID: 1
2025-02-05 15:11:18.048 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:11:18.056 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:11:18.057 -05:00 [INF] Persona con ID 1 Actualizada exitosamente.
2025-02-05 15:11:18.057 -05:00 [INF] Executing OkObjectResult, writing value of type 'API_Secure.Models.Persona'.
2025-02-05 15:11:18.058 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 20.8116ms
2025-02-05 15:11:18.058 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:11:18.058 -05:00 [INF] HTTP PUT /api/personas/Actualizar/1 responded 200 in 22.2007 ms
2025-02-05 15:11:18.058 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/1 - 200 null application/json; charset=utf-8 23.5411ms
2025-02-05 15:11:36.073 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2ODM0fQ.PRkkCua2XdSNoSi_UWbH_lmegvTT_GPFMmY4Hdj9p_w - null null
2025-02-05 15:11:36.073 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:11:36.073 -05:00 [INF] HTTP OPTIONS /api/Control/ValidarToken responded 204 in 0.3024 ms
2025-02-05 15:11:36.074 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2ODM0fQ.PRkkCua2XdSNoSi_UWbH_lmegvTT_GPFMmY4Hdj9p_w - 204 null null 0.8848ms
2025-02-05 15:11:36.077 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2ODM0fQ.PRkkCua2XdSNoSi_UWbH_lmegvTT_GPFMmY4Hdj9p_w - null null
2025-02-05 15:11:36.077 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:11:36.078 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:11:36.078 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:11:36.079 -05:00 [INF] Validando token JWT.
2025-02-05 15:11:36.079 -05:00 [INF] Validando token JWT.
2025-02-05 15:11:36.079 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:11:36.079 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:11:36.079 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:11:36.080 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 1.4569ms
2025-02-05 15:11:36.080 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:11:36.080 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 3.2131 ms
2025-02-05 15:11:36.080 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2ODM0fQ.PRkkCua2XdSNoSi_UWbH_lmegvTT_GPFMmY4Hdj9p_w - 200 null application/json; charset=utf-8 3.5051ms
2025-02-05 15:11:36.204 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:11:36.204 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:11:36.204 -05:00 [INF] HTTP OPTIONS /api/personas/Lista responded 204 in 0.3022 ms
2025-02-05 15:11:36.205 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - 204 null null 1.2849ms
2025-02-05 15:11:36.208 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:11:36.209 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:11:36.211 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:11:36.211 -05:00 [INF] Route matched with {action = "Lista", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Lista(Int32, Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:11:36.211 -05:00 [INF] Obteniendo lista de personas.
2025-02-05 15:11:36.220 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[p0='?' (DbType = Int32), p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC ConsultarPersonas @PageNumber = @p0, @PageSize = @p1
2025-02-05 15:11:36.221 -05:00 [INF] Lista de personas obtenida exitosamente.
2025-02-05 15:11:36.221 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[API_Secure.Models.Persona, API-Secure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-05 15:11:36.221 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Lista (API-Secure) in 10.2778ms
2025-02-05 15:11:36.221 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:11:36.221 -05:00 [INF] HTTP GET /api/personas/Lista responded 200 in 12.7549 ms
2025-02-05 15:11:36.221 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/personas/Lista - 200 null application/json; charset=utf-8 13.1477ms
2025-02-05 15:12:25.102 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/15 - null null
2025-02-05 15:12:25.102 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:12:25.102 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/15 responded 204 in 0.1166 ms
2025-02-05 15:12:25.102 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/15 - 204 null null 0.5084ms
2025-02-05 15:12:25.105 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/15 - application/json 293
2025-02-05 15:12:25.105 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:12:25.106 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:12:25.106 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:12:25.107 -05:00 [INF] Actualizando persona con ID: 15
2025-02-05 15:12:25.111 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:12:25.117 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:12:25.118 -05:00 [INF] Persona con ID 15 Actualizada exitosamente.
2025-02-05 15:12:25.118 -05:00 [INF] Executing OkObjectResult, writing value of type 'API_Secure.Models.Persona'.
2025-02-05 15:12:25.118 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 12.2406ms
2025-02-05 15:12:25.118 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:12:25.118 -05:00 [INF] HTTP PUT /api/personas/Actualizar/15 responded 200 in 13.2223 ms
2025-02-05 15:12:25.118 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/15 - 200 null application/json; charset=utf-8 13.4953ms
2025-02-05 15:12:52.265 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - null null
2025-02-05 15:12:52.265 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:12:52.266 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/11 responded 204 in 0.1368 ms
2025-02-05 15:12:52.266 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - 204 null null 0.8099ms
2025-02-05 15:12:52.271 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 287
2025-02-05 15:12:52.272 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:12:52.274 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:12:52.274 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:12:52.275 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:12:52.281 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:12:52.288 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:12:52.289 -05:00 [INF] Persona con ID 11 Actualizada exitosamente.
2025-02-05 15:12:52.289 -05:00 [INF] Executing OkObjectResult, writing value of type 'API_Secure.Models.Persona'.
2025-02-05 15:12:52.290 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 15.4635ms
2025-02-05 15:12:52.290 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:12:52.290 -05:00 [INF] HTTP PUT /api/personas/Actualizar/11 responded 200 in 18.1492 ms
2025-02-05 15:12:52.291 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 200 null application/json; charset=utf-8 19.0272ms
2025-02-05 15:13:40.782 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2ODM0fQ.PRkkCua2XdSNoSi_UWbH_lmegvTT_GPFMmY4Hdj9p_w - null null
2025-02-05 15:13:40.783 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:13:40.783 -05:00 [INF] HTTP OPTIONS /api/Control/ValidarToken responded 204 in 1.1506 ms
2025-02-05 15:13:40.792 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2ODM0fQ.PRkkCua2XdSNoSi_UWbH_lmegvTT_GPFMmY4Hdj9p_w - 204 null null 9.9747ms
2025-02-05 15:13:40.796 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2ODM0fQ.PRkkCua2XdSNoSi_UWbH_lmegvTT_GPFMmY4Hdj9p_w - null null
2025-02-05 15:13:40.797 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:13:40.800 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:13:40.800 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:13:40.801 -05:00 [INF] Validando token JWT.
2025-02-05 15:13:40.801 -05:00 [INF] Validando token JWT.
2025-02-05 15:13:40.801 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:13:40.801 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:13:40.802 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:13:40.802 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 1.6027ms
2025-02-05 15:13:40.802 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:13:40.802 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 5.5905 ms
2025-02-05 15:13:40.803 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2ODM0fQ.PRkkCua2XdSNoSi_UWbH_lmegvTT_GPFMmY4Hdj9p_w - 200 null application/json; charset=utf-8 6.3655ms
2025-02-05 15:13:41.665 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:13:41.665 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:13:41.665 -05:00 [INF] HTTP OPTIONS /api/personas/Lista responded 204 in 0.1580 ms
2025-02-05 15:13:41.666 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - 204 null null 0.6514ms
2025-02-05 15:13:41.669 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:13:41.669 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:13:41.670 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:13:41.670 -05:00 [INF] Route matched with {action = "Lista", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Lista(Int32, Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:13:41.671 -05:00 [INF] Obteniendo lista de personas.
2025-02-05 15:13:41.679 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[p0='?' (DbType = Int32), p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC ConsultarPersonas @PageNumber = @p0, @PageSize = @p1
2025-02-05 15:13:41.680 -05:00 [INF] Lista de personas obtenida exitosamente.
2025-02-05 15:13:41.680 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[API_Secure.Models.Persona, API-Secure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-05 15:13:41.681 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Lista (API-Secure) in 10.3429ms
2025-02-05 15:13:41.681 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:13:41.681 -05:00 [INF] HTTP GET /api/personas/Lista responded 200 in 11.9452 ms
2025-02-05 15:13:41.681 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/personas/Lista - 200 null application/json; charset=utf-8 12.3159ms
2025-02-05 15:13:48.743 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/1 - null null
2025-02-05 15:13:48.743 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:13:48.743 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/1 responded 204 in 0.1583 ms
2025-02-05 15:13:48.745 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/1 - 204 null null 1.5421ms
2025-02-05 15:13:48.750 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/1 - application/json 274
2025-02-05 15:13:48.750 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:13:48.752 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:13:48.752 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:13:48.756 -05:00 [INF] Actualizando persona con ID: 1
2025-02-05 15:13:48.760 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:13:48.770 -05:00 [INF] Executed DbCommand (9ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:13:48.771 -05:00 [INF] Persona con ID 1 Actualizada exitosamente.
2025-02-05 15:13:48.771 -05:00 [INF] Executing OkObjectResult, writing value of type 'API_Secure.Models.Persona'.
2025-02-05 15:13:48.772 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 19.3727ms
2025-02-05 15:13:48.772 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:13:48.772 -05:00 [INF] HTTP PUT /api/personas/Actualizar/1 responded 200 in 22.1448 ms
2025-02-05 15:13:48.772 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/1 - 200 null application/json; charset=utf-8 22.786ms
2025-02-05 15:14:37.341 -05:00 [INF] User profile is available. Using 'C:\Users\Developer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-05 15:14:37.675 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/weatherforecast - null null
2025-02-05 15:14:37.836 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-05 15:14:37.838 -05:00 [INF] Hosting environment: Development
2025-02-05 15:14:37.838 -05:00 [INF] Content root path: C:\Users\Developer\source\repos\API-Secure
2025-02-05 15:14:37.974 -05:00 [INF] HTTP GET /weatherforecast responded 404 in 91.1790 ms
2025-02-05 15:14:38.006 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/weatherforecast - 404 null null 339.3398ms
2025-02-05 15:14:38.015 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5925/weatherforecast, Response status code: 404
2025-02-05 15:14:52.188 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2ODM0fQ.PRkkCua2XdSNoSi_UWbH_lmegvTT_GPFMmY4Hdj9p_w - null null
2025-02-05 15:14:52.250 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:14:52.256 -05:00 [INF] HTTP OPTIONS /api/Control/ValidarToken responded 204 in 18.3281 ms
2025-02-05 15:14:52.259 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2ODM0fQ.PRkkCua2XdSNoSi_UWbH_lmegvTT_GPFMmY4Hdj9p_w - 204 null null 72.1432ms
2025-02-05 15:14:52.271 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2ODM0fQ.PRkkCua2XdSNoSi_UWbH_lmegvTT_GPFMmY4Hdj9p_w - null null
2025-02-05 15:14:52.275 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:14:52.361 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:14:52.391 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:14:52.596 -05:00 [INF] Validando token JWT.
2025-02-05 15:14:52.597 -05:00 [INF] Validando token JWT.
2025-02-05 15:14:52.615 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:14:52.615 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:14:52.622 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:14:52.636 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 241.083ms
2025-02-05 15:14:52.636 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:14:52.636 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 361.8284 ms
2025-02-05 15:14:52.639 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2ODM0fQ.PRkkCua2XdSNoSi_UWbH_lmegvTT_GPFMmY4Hdj9p_w - 200 null application/json; charset=utf-8 367.9331ms
2025-02-05 15:14:54.061 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:14:54.062 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:14:54.063 -05:00 [INF] HTTP OPTIONS /api/personas/Lista responded 204 in 0.4303 ms
2025-02-05 15:14:54.064 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - 204 null null 3.2631ms
2025-02-05 15:14:54.067 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:14:54.070 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:14:54.082 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:14:54.091 -05:00 [INF] Route matched with {action = "Lista", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Lista(Int32, Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:14:54.105 -05:00 [INF] Obteniendo lista de personas.
2025-02-05 15:14:55.401 -05:00 [INF] Executed DbCommand (63ms) [Parameters=[p0='?' (DbType = Int32), p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC ConsultarPersonas @PageNumber = @p0, @PageSize = @p1
2025-02-05 15:14:55.502 -05:00 [INF] Lista de personas obtenida exitosamente.
2025-02-05 15:14:55.504 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[API_Secure.Models.Persona, API-Secure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-05 15:14:55.516 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Lista (API-Secure) in 1424.0539ms
2025-02-05 15:14:55.516 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:14:55.519 -05:00 [INF] HTTP GET /api/personas/Lista responded 200 in 1448.9634 ms
2025-02-05 15:14:55.527 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/personas/Lista - 200 null application/json; charset=utf-8 1459.3897ms
2025-02-05 15:15:10.419 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Agregar - null null
2025-02-05 15:15:10.420 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:15:10.420 -05:00 [INF] HTTP OPTIONS /api/personas/Agregar responded 204 in 0.8386 ms
2025-02-05 15:15:10.422 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Agregar - 204 null null 2.4215ms
2025-02-05 15:15:10.428 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5925/api/personas/Agregar - application/json 149
2025-02-05 15:15:10.429 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:15:10.432 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Agregar (API-Secure)'
2025-02-05 15:15:10.438 -05:00 [INF] Route matched with {action = "Agregar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Agregar(API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:15:10.595 -05:00 [INF] Agregando nueva persona.
2025-02-05 15:15:10.739 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (Size = 100), @p3='?' (Size = 20), @p4='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Personas] ([Apellidos], [Email], [Nombres], [NumeroIdentificacion], [TipoIdentificacion])
OUTPUT INSERTED.[Identificador], INSERTED.[FechaCreacion], INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-02-05 15:15:10.789 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of UNIQUE KEY constraint 'UQ__Personas__A9D1053423C6F974'. Cannot insert duplicate key in object 'dbo.Personas'. The duplicate key value is (fs@gmail.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:3ab07e5e-629d-4868-a6da-1187b213fb02
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of UNIQUE KEY constraint 'UQ__Personas__A9D1053423C6F974'. Cannot insert duplicate key in object 'dbo.Personas'. The duplicate key value is (fs@gmail.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:3ab07e5e-629d-4868-a6da-1187b213fb02
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:15:10.915 -05:00 [ERR] Error al agregar persona.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of UNIQUE KEY constraint 'UQ__Personas__A9D1053423C6F974'. Cannot insert duplicate key in object 'dbo.Personas'. The duplicate key value is (fs@gmail.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:3ab07e5e-629d-4868-a6da-1187b213fb02
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Agregar(Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 61
2025-02-05 15:15:10.934 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:15:10.940 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Agregar (API-Secure) in 501.2146ms
2025-02-05 15:15:10.940 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Agregar (API-Secure)'
2025-02-05 15:15:10.940 -05:00 [ERR] HTTP POST /api/personas/Agregar responded 500 in 510.9413 ms
2025-02-05 15:15:10.941 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5925/api/personas/Agregar - 500 null text/plain; charset=utf-8 513.6086ms
2025-02-05 15:15:32.080 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Agregar - null null
2025-02-05 15:15:32.080 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:15:32.081 -05:00 [INF] HTTP OPTIONS /api/personas/Agregar responded 204 in 0.8505 ms
2025-02-05 15:15:32.085 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Agregar - 204 null null 5.5196ms
2025-02-05 15:15:32.091 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5925/api/personas/Agregar - application/json 150
2025-02-05 15:15:32.092 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:15:32.098 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Agregar (API-Secure)'
2025-02-05 15:15:32.098 -05:00 [INF] Route matched with {action = "Agregar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Agregar(API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:15:32.101 -05:00 [INF] Agregando nueva persona.
2025-02-05 15:15:32.181 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (Size = 100), @p3='?' (Size = 20), @p4='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Personas] ([Apellidos], [Email], [Nombres], [NumeroIdentificacion], [TipoIdentificacion])
OUTPUT INSERTED.[Identificador], INSERTED.[FechaCreacion], INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-02-05 15:15:32.192 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of UNIQUE KEY constraint 'UQ__Personas__A9D1053423C6F974'. Cannot insert duplicate key in object 'dbo.Personas'. The duplicate key value is (fs@gmail.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:3ab07e5e-629d-4868-a6da-1187b213fb02
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of UNIQUE KEY constraint 'UQ__Personas__A9D1053423C6F974'. Cannot insert duplicate key in object 'dbo.Personas'. The duplicate key value is (fs@gmail.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:3ab07e5e-629d-4868-a6da-1187b213fb02
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:15:32.257 -05:00 [ERR] Error al agregar persona.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of UNIQUE KEY constraint 'UQ__Personas__A9D1053423C6F974'. Cannot insert duplicate key in object 'dbo.Personas'. The duplicate key value is (fs@gmail.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:3ab07e5e-629d-4868-a6da-1187b213fb02
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Agregar(Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 61
2025-02-05 15:15:32.259 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:15:32.260 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Agregar (API-Secure) in 160.9235ms
2025-02-05 15:15:32.260 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Agregar (API-Secure)'
2025-02-05 15:15:32.260 -05:00 [ERR] HTTP POST /api/personas/Agregar responded 500 in 168.1156 ms
2025-02-05 15:15:32.260 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5925/api/personas/Agregar - 500 null text/plain; charset=utf-8 169.822ms
2025-02-05 15:16:28.724 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2ODM0fQ.PRkkCua2XdSNoSi_UWbH_lmegvTT_GPFMmY4Hdj9p_w - null null
2025-02-05 15:16:28.728 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:16:28.729 -05:00 [INF] HTTP OPTIONS /api/Control/ValidarToken responded 204 in 3.9987 ms
2025-02-05 15:16:28.731 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2ODM0fQ.PRkkCua2XdSNoSi_UWbH_lmegvTT_GPFMmY4Hdj9p_w - 204 null null 6.548ms
2025-02-05 15:16:28.734 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2ODM0fQ.PRkkCua2XdSNoSi_UWbH_lmegvTT_GPFMmY4Hdj9p_w - null null
2025-02-05 15:16:28.734 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:16:28.735 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:16:28.735 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:16:28.737 -05:00 [INF] Validando token JWT.
2025-02-05 15:16:28.737 -05:00 [INF] Validando token JWT.
2025-02-05 15:16:28.737 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:16:28.737 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:16:28.737 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:16:28.739 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 3.3813ms
2025-02-05 15:16:28.739 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:16:28.739 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 5.0216 ms
2025-02-05 15:16:28.739 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg2ODM0fQ.PRkkCua2XdSNoSi_UWbH_lmegvTT_GPFMmY4Hdj9p_w - 200 null application/json; charset=utf-8 5.6994ms
2025-02-05 15:16:28.863 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:16:28.863 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:16:28.863 -05:00 [INF] HTTP OPTIONS /api/personas/Lista responded 204 in 0.4473 ms
2025-02-05 15:16:28.864 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - 204 null null 1.913ms
2025-02-05 15:16:28.869 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:16:28.869 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:16:28.869 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:16:28.870 -05:00 [INF] Route matched with {action = "Lista", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Lista(Int32, Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:16:28.870 -05:00 [INF] Obteniendo lista de personas.
2025-02-05 15:16:28.892 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[p0='?' (DbType = Int32), p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC ConsultarPersonas @PageNumber = @p0, @PageSize = @p1
2025-02-05 15:16:28.893 -05:00 [INF] Lista de personas obtenida exitosamente.
2025-02-05 15:16:28.893 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[API_Secure.Models.Persona, API-Secure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-05 15:16:28.894 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Lista (API-Secure) in 23.904ms
2025-02-05 15:16:28.894 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:16:28.894 -05:00 [INF] HTTP GET /api/personas/Lista responded 200 in 25.0497 ms
2025-02-05 15:16:28.894 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/personas/Lista - 200 null application/json; charset=utf-8 25.7953ms
2025-02-05 15:16:32.219 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Eliminar/15 - null null
2025-02-05 15:16:32.220 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:16:32.220 -05:00 [INF] HTTP OPTIONS /api/personas/Eliminar/15 responded 204 in 0.1961 ms
2025-02-05 15:16:32.220 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Eliminar/15 - 204 null null 1.1034ms
2025-02-05 15:16:32.223 -05:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5925/api/personas/Eliminar/15 - null null
2025-02-05 15:16:32.224 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:16:32.224 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Eliminar (API-Secure)'
2025-02-05 15:16:32.229 -05:00 [INF] Route matched with {action = "Eliminar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Eliminar(Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:16:32.233 -05:00 [INF] Eliminando persona con ID: 15
2025-02-05 15:16:32.400 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:16:32.431 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Personas]
OUTPUT 1
WHERE [Identificador] = @p0;
2025-02-05 15:16:32.440 -05:00 [INF] Persona con ID 15 eliminada exitosamente.
2025-02-05 15:16:32.442 -05:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-02-05 15:16:32.442 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Eliminar (API-Secure) in 213.4714ms
2025-02-05 15:16:32.443 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Eliminar (API-Secure)'
2025-02-05 15:16:32.443 -05:00 [INF] HTTP DELETE /api/personas/Eliminar/15 responded 200 in 218.6908 ms
2025-02-05 15:16:32.444 -05:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5925/api/personas/Eliminar/15 - 200 null null 220.4948ms
2025-02-05 15:16:33.854 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Eliminar/14 - null null
2025-02-05 15:16:33.855 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:16:33.855 -05:00 [INF] HTTP OPTIONS /api/personas/Eliminar/14 responded 204 in 0.5978 ms
2025-02-05 15:16:33.855 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Eliminar/14 - 204 null null 1.3144ms
2025-02-05 15:16:33.858 -05:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5925/api/personas/Eliminar/14 - null null
2025-02-05 15:16:33.858 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:16:33.859 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Eliminar (API-Secure)'
2025-02-05 15:16:33.859 -05:00 [INF] Route matched with {action = "Eliminar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Eliminar(Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:16:33.859 -05:00 [INF] Eliminando persona con ID: 14
2025-02-05 15:16:33.867 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:16:33.871 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Personas]
OUTPUT 1
WHERE [Identificador] = @p0;
2025-02-05 15:16:33.872 -05:00 [INF] Persona con ID 14 eliminada exitosamente.
2025-02-05 15:16:33.872 -05:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-02-05 15:16:33.873 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Eliminar (API-Secure) in 13.7813ms
2025-02-05 15:16:33.873 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Eliminar (API-Secure)'
2025-02-05 15:16:33.873 -05:00 [INF] HTTP DELETE /api/personas/Eliminar/14 responded 200 in 14.6748 ms
2025-02-05 15:16:33.874 -05:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5925/api/personas/Eliminar/14 - 200 null null 15.8609ms
2025-02-05 15:16:53.015 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Agregar - null null
2025-02-05 15:16:53.015 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:16:53.016 -05:00 [INF] HTTP OPTIONS /api/personas/Agregar responded 204 in 0.8628 ms
2025-02-05 15:16:53.017 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Agregar - 204 null null 1.684ms
2025-02-05 15:16:53.019 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5925/api/personas/Agregar - application/json 168
2025-02-05 15:16:53.019 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:16:53.019 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Agregar (API-Secure)'
2025-02-05 15:16:53.019 -05:00 [INF] Route matched with {action = "Agregar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Agregar(API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:16:53.020 -05:00 [INF] Agregando nueva persona.
2025-02-05 15:16:53.027 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (Size = 100), @p3='?' (Size = 20), @p4='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Personas] ([Apellidos], [Email], [Nombres], [NumeroIdentificacion], [TipoIdentificacion])
OUTPUT INSERTED.[Identificador], INSERTED.[FechaCreacion], INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-02-05 15:16:53.046 -05:00 [INF] Persona agregada exitosamente.
2025-02-05 15:16:53.046 -05:00 [INF] Executing OkObjectResult, writing value of type 'API_Secure.Models.Persona'.
2025-02-05 15:16:53.047 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Agregar (API-Secure) in 27.4519ms
2025-02-05 15:16:53.047 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Agregar (API-Secure)'
2025-02-05 15:16:53.047 -05:00 [INF] HTTP POST /api/personas/Agregar responded 200 in 28.1509 ms
2025-02-05 15:16:53.047 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5925/api/personas/Agregar - 200 null application/json; charset=utf-8 28.5883ms
2025-02-05 15:17:31.584 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/18 - null null
2025-02-05 15:17:31.585 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:17:31.590 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/18 responded 204 in 6.1186 ms
2025-02-05 15:17:31.592 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/18 - 204 null null 8.139ms
2025-02-05 15:17:31.595 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/18 - application/json 303
2025-02-05 15:17:31.596 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:17:31.596 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:17:31.600 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:17:31.606 -05:00 [INF] Actualizando persona con ID: 18
2025-02-05 15:17:31.619 -05:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:17:31.643 -05:00 [INF] Executed DbCommand (9ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:17:31.643 -05:00 [INF] Persona con ID 18 Actualizada exitosamente.
2025-02-05 15:17:31.643 -05:00 [INF] Executing OkObjectResult, writing value of type 'API_Secure.Models.Persona'.
2025-02-05 15:17:31.644 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 43.5207ms
2025-02-05 15:17:31.644 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:17:31.644 -05:00 [INF] HTTP PUT /api/personas/Actualizar/18 responded 200 in 48.6700 ms
2025-02-05 15:17:31.645 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/18 - 200 null application/json; charset=utf-8 49.2023ms
2025-02-05 15:17:46.437 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/18 - null null
2025-02-05 15:17:46.437 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:17:46.438 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/18 responded 204 in 0.5314 ms
2025-02-05 15:17:46.438 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/18 - 204 null null 1.2697ms
2025-02-05 15:17:46.441 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/18 - application/json 298
2025-02-05 15:17:46.441 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:17:46.441 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:17:46.441 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:17:46.442 -05:00 [INF] Actualizando persona con ID: 18
2025-02-05 15:17:46.446 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:17:46.450 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:17:46.450 -05:00 [INF] Persona con ID 18 Actualizada exitosamente.
2025-02-05 15:17:46.450 -05:00 [INF] Executing OkObjectResult, writing value of type 'API_Secure.Models.Persona'.
2025-02-05 15:17:46.451 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 9.6663ms
2025-02-05 15:17:46.451 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:17:46.451 -05:00 [INF] HTTP PUT /api/personas/Actualizar/18 responded 200 in 10.4861 ms
2025-02-05 15:17:46.453 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/18 - 200 null application/json; charset=utf-8 12.0558ms
2025-02-05 15:18:25.301 -05:00 [INF] User profile is available. Using 'C:\Users\Developer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-05 15:18:25.562 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/weatherforecast - null null
2025-02-05 15:18:25.701 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-05 15:18:25.702 -05:00 [INF] Hosting environment: Development
2025-02-05 15:18:25.702 -05:00 [INF] Content root path: C:\Users\Developer\source\repos\API-Secure
2025-02-05 15:18:25.818 -05:00 [INF] HTTP GET /weatherforecast responded 404 in 84.6191 ms
2025-02-05 15:18:25.844 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/weatherforecast - 404 null null 289.7258ms
2025-02-05 15:18:25.851 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5925/weatherforecast, Response status code: 404
2025-02-05 15:19:09.893 -05:00 [INF] User profile is available. Using 'C:\Users\Developer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-05 15:19:10.173 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/swagger/index.html - null null
2025-02-05 15:19:10.173 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/weatherforecast - null null
2025-02-05 15:19:10.464 -05:00 [INF] HTTP GET /weatherforecast responded 404 in 120.8960 ms
2025-02-05 15:19:10.470 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/weatherforecast - 499 null null 310.8378ms
2025-02-05 15:19:10.474 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5925/weatherforecast, Response status code: 499
2025-02-05 15:19:10.546 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-05 15:19:10.547 -05:00 [INF] Hosting environment: Development
2025-02-05 15:19:10.547 -05:00 [INF] Content root path: C:\Users\Developer\source\repos\API-Secure
2025-02-05 15:19:10.570 -05:00 [INF] HTTP GET /swagger/index.html responded 200 in 228.2047 ms
2025-02-05 15:19:10.573 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/swagger/index.html - 200 null text/html;charset=utf-8 414.8378ms
2025-02-05 15:19:10.590 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/_vs/browserLink - null null
2025-02-05 15:19:10.590 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/_framework/aspnetcore-browser-refresh.js - null null
2025-02-05 15:19:10.590 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/swagger/index.js - null null
2025-02-05 15:19:10.595 -05:00 [INF] HTTP GET /swagger/index.js responded 200 in 4.7289 ms
2025-02-05 15:19:10.596 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 7.2117ms
2025-02-05 15:19:10.596 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/swagger/index.js - 200 null application/javascript;charset=utf-8 6.7274ms
2025-02-05 15:19:10.646 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/_vs/browserLink - 200 null text/javascript; charset=UTF-8 59.1087ms
2025-02-05 15:19:10.716 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/swagger/v1/swagger.json - null null
2025-02-05 15:19:10.738 -05:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 21.6689 ms
2025-02-05 15:19:10.739 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 23.8833ms
2025-02-05 15:22:36.108 -05:00 [INF] User profile is available. Using 'C:\Users\Developer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-05 15:22:36.477 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/login - null null
2025-02-05 15:22:36.477 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/weatherforecast - null null
2025-02-05 15:22:36.537 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:22:36.546 -05:00 [INF] HTTP OPTIONS /api/Control/login responded 204 in 13.2332 ms
2025-02-05 15:22:36.573 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5925/api/Control/login - application/json 43
2025-02-05 15:22:36.577 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/login - 204 null null 116.5407ms
2025-02-05 15:22:36.578 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:22:36.722 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-05 15:22:36.723 -05:00 [INF] Hosting environment: Development
2025-02-05 15:22:36.723 -05:00 [INF] Content root path: C:\Users\Developer\source\repos\API-Secure
2025-02-05 15:22:36.761 -05:00 [INF] HTTP GET /weatherforecast responded 404 in 38.4566 ms
2025-02-05 15:22:36.785 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/weatherforecast - 404 null null 323.547ms
2025-02-05 15:22:36.788 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5925/weatherforecast, Response status code: 404
2025-02-05 15:22:36.836 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/5/2025 8:20:34 PM', Current time (UTC): '2/5/2025 8:22:36 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-05 15:22:36.924 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/5/2025 8:20:34 PM', Current time (UTC): '2/5/2025 8:22:36 PM'.
2025-02-05 15:22:36.926 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.Login (API-Secure)'
2025-02-05 15:22:36.978 -05:00 [INF] Route matched with {action = "Login", controller = "Control"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(API_Secure.Models.DTO.Login) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:22:37.126 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5925/api/Control/login - application/json 43
2025-02-05 15:22:37.127 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:22:37.134 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/5/2025 8:20:34 PM', Current time (UTC): '2/5/2025 8:22:37 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-05 15:22:37.135 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/5/2025 8:20:34 PM', Current time (UTC): '2/5/2025 8:22:37 PM'.
2025-02-05 15:22:37.135 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.Login (API-Secure)'
2025-02-05 15:22:37.136 -05:00 [INF] Route matched with {action = "Login", controller = "Control"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(API_Secure.Models.DTO.Login) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:22:37.321 -05:00 [INF] Intentando iniciar sesi贸n con el usuario: PEDRO
2025-02-05 15:22:37.321 -05:00 [INF] Intentando iniciar sesi贸n con el usuario: PEDRO
2025-02-05 15:22:37.836 -05:00 [INF] Iniciando proceso de encriptaci贸n SHA256.
2025-02-05 15:22:37.836 -05:00 [INF] Iniciando proceso de encriptaci贸n SHA256.
2025-02-05 15:22:37.837 -05:00 [INF] Encriptaci贸n exitosa.
2025-02-05 15:22:37.837 -05:00 [INF] Encriptaci贸n exitosa.
2025-02-05 15:22:38.553 -05:00 [INF] Executed DbCommand (54ms) [Parameters=[@__encriptarSHA256_0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Identificador], [u].[FechaCreacion], [u].[Pass], [u].[Usuario]
FROM [Usuario] AS [u]
WHERE [u].[Pass] = @__encriptarSHA256_0
2025-02-05 15:22:38.553 -05:00 [INF] Executed DbCommand (54ms) [Parameters=[@__encriptarSHA256_0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Identificador], [u].[FechaCreacion], [u].[Pass], [u].[Usuario]
FROM [Usuario] AS [u]
WHERE [u].[Pass] = @__encriptarSHA256_0
2025-02-05 15:22:38.636 -05:00 [INF] Inicio de sesi贸n exitoso para el usuario: PEDRO
2025-02-05 15:22:38.636 -05:00 [INF] Inicio de sesi贸n exitoso para el usuario: PEDRO
2025-02-05 15:22:38.637 -05:00 [INF] Generando JWT para el usuario: PEDRO
2025-02-05 15:22:38.637 -05:00 [INF] Generando JWT para el usuario: PEDRO
2025-02-05 15:22:38.646 -05:00 [INF] JWT generado exitosamente.
2025-02-05 15:22:38.646 -05:00 [INF] JWT generado exitosamente.
2025-02-05 15:22:38.652 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:22:38.652 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:22:38.666 -05:00 [INF] Executed action API_Secure.Controllers.Control.Login (API-Secure) in 1682.7521ms
2025-02-05 15:22:38.666 -05:00 [INF] Executed action API_Secure.Controllers.Control.Login (API-Secure) in 1526.9488ms
2025-02-05 15:22:38.667 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.Login (API-Secure)'
2025-02-05 15:22:38.667 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.Login (API-Secure)'
2025-02-05 15:22:38.668 -05:00 [INF] HTTP POST /api/Control/login responded 200 in 1541.5567 ms
2025-02-05 15:22:38.668 -05:00 [INF] HTTP POST /api/Control/login responded 200 in 2090.4887 ms
2025-02-05 15:22:38.675 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5925/api/Control/login - 200 null application/json; charset=utf-8 2102.711ms
2025-02-05 15:22:38.675 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5925/api/Control/login - 200 null application/json; charset=utf-8 1549.1801ms
2025-02-05 15:22:38.677 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - null null
2025-02-05 15:22:38.677 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:22:38.677 -05:00 [INF] HTTP OPTIONS /api/Control/ValidarToken responded 204 in 0.1791 ms
2025-02-05 15:22:38.678 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - 204 null null 0.717ms
2025-02-05 15:22:38.689 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - null null
2025-02-05 15:22:38.689 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - null null
2025-02-05 15:22:38.689 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:22:38.689 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:22:38.699 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:22:38.699 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:22:38.702 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:22:38.702 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:22:38.710 -05:00 [INF] Validando token JWT.
2025-02-05 15:22:38.710 -05:00 [INF] Validando token JWT.
2025-02-05 15:22:38.711 -05:00 [INF] Validando token JWT.
2025-02-05 15:22:38.711 -05:00 [INF] Validando token JWT.
2025-02-05 15:22:38.727 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:22:38.727 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:22:38.728 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:22:38.728 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:22:38.728 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:22:38.728 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:22:38.730 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 27.6441ms
2025-02-05 15:22:38.730 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:22:38.730 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 41.1769 ms
2025-02-05 15:22:38.730 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - 200 null application/json; charset=utf-8 41.6268ms
2025-02-05 15:22:38.735 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 33.0149ms
2025-02-05 15:22:38.735 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:22:38.735 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 46.6307 ms
2025-02-05 15:22:38.736 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - 499 null application/json; charset=utf-8 47.1273ms
2025-02-05 15:22:38.763 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:22:38.764 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:22:38.764 -05:00 [INF] HTTP OPTIONS /api/personas/Lista responded 204 in 0.2963 ms
2025-02-05 15:22:38.765 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - 204 null null 1.2945ms
2025-02-05 15:22:38.775 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:22:38.777 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:22:38.783 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:22:38.789 -05:00 [INF] Route matched with {action = "Lista", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Lista(Int32, Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:22:38.793 -05:00 [INF] Obteniendo lista de personas.
2025-02-05 15:22:38.901 -05:00 [INF] Executed DbCommand (11ms) [Parameters=[p0='?' (DbType = Int32), p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC ConsultarPersonas @PageNumber = @p0, @PageSize = @p1
2025-02-05 15:22:38.923 -05:00 [INF] Lista de personas obtenida exitosamente.
2025-02-05 15:22:38.923 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[API_Secure.Models.Persona, API-Secure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-05 15:22:38.932 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Lista (API-Secure) in 142.4299ms
2025-02-05 15:22:38.932 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:22:38.932 -05:00 [INF] HTTP GET /api/personas/Lista responded 200 in 155.0230 ms
2025-02-05 15:22:38.932 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/personas/Lista - 200 null application/json; charset=utf-8 157.1414ms
2025-02-05 15:22:43.214 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/18 - null null
2025-02-05 15:22:43.215 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:22:43.216 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/18 responded 204 in 0.6583 ms
2025-02-05 15:22:43.216 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/18 - 204 null null 2.6238ms
2025-02-05 15:22:43.226 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/18 - application/json 302
2025-02-05 15:22:43.227 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:22:43.231 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:22:43.237 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:22:43.248 -05:00 [INF] Actualizando persona con ID: 18
2025-02-05 15:22:43.292 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:22:43.393 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:22:43.418 -05:00 [INF] Persona con ID 18 actualizada exitosamente.
2025-02-05 15:22:43.418 -05:00 [INF] Executing OkObjectResult, writing value of type 'API_Secure.Models.Persona'.
2025-02-05 15:22:43.419 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 182.2016ms
2025-02-05 15:22:43.420 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:22:43.420 -05:00 [INF] HTTP PUT /api/personas/Actualizar/18 responded 200 in 193.1481 ms
2025-02-05 15:22:43.420 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/18 - 200 null application/json; charset=utf-8 194.3234ms
2025-02-05 15:22:50.900 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/18 - null null
2025-02-05 15:22:50.901 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:22:50.901 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/18 responded 204 in 0.2302 ms
2025-02-05 15:22:50.901 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/18 - 204 null null 1.6475ms
2025-02-05 15:22:50.903 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/18 - application/json 301
2025-02-05 15:22:50.904 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:22:50.905 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:22:50.905 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:22:50.907 -05:00 [INF] Actualizando persona con ID: 18
2025-02-05 15:22:50.912 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:22:50.917 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:22:50.935 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:22:51.050 -05:00 [ERR] Error al actualizar persona con ID 18.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:22:51.068 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:22:51.074 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 168.0779ms
2025-02-05 15:22:51.074 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:22:51.074 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/18 responded 500 in 170.3368 ms
2025-02-05 15:22:51.075 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/18 - 500 null text/plain; charset=utf-8 172.1776ms
2025-02-05 15:22:52.516 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/18 - application/json 301
2025-02-05 15:22:52.517 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:22:52.517 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:22:52.517 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:22:52.518 -05:00 [INF] Actualizando persona con ID: 18
2025-02-05 15:22:52.522 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:22:52.525 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:22:52.530 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:22:52.595 -05:00 [ERR] Error al actualizar persona con ID 18.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:22:52.598 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:22:52.599 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 81.6964ms
2025-02-05 15:22:52.599 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:22:52.599 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/18 responded 500 in 82.5975 ms
2025-02-05 15:22:52.600 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/18 - 500 null text/plain; charset=utf-8 83.4641ms
2025-02-05 15:22:52.915 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/18 - application/json 301
2025-02-05 15:22:52.915 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:22:52.916 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:22:52.916 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:22:52.917 -05:00 [INF] Actualizando persona con ID: 18
2025-02-05 15:22:52.922 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:22:52.926 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:22:52.932 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:22:52.996 -05:00 [ERR] Error al actualizar persona con ID 18.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:22:52.998 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:22:52.999 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 82.7949ms
2025-02-05 15:22:52.999 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:22:52.999 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/18 responded 500 in 83.9812 ms
2025-02-05 15:22:53.000 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/18 - 500 null text/plain; charset=utf-8 84.8568ms
2025-02-05 15:22:53.123 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/18 - application/json 301
2025-02-05 15:22:53.123 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:22:53.124 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:22:53.124 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:22:53.125 -05:00 [INF] Actualizando persona con ID: 18
2025-02-05 15:22:53.128 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:22:53.131 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:22:53.135 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:22:53.193 -05:00 [ERR] Error al actualizar persona con ID 18.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:22:53.196 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:22:53.197 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 72.6375ms
2025-02-05 15:22:53.197 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:22:53.197 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/18 responded 500 in 73.9370 ms
2025-02-05 15:22:53.197 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/18 - 500 null text/plain; charset=utf-8 74.4614ms
2025-02-05 15:22:56.956 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/18 - null null
2025-02-05 15:22:56.956 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:22:56.956 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/18 responded 204 in 0.1157 ms
2025-02-05 15:22:56.956 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/18 - 204 null null 0.7458ms
2025-02-05 15:22:56.958 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/18 - application/json 297
2025-02-05 15:22:56.959 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:22:56.959 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:22:56.959 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:22:56.960 -05:00 [INF] Actualizando persona con ID: 18
2025-02-05 15:22:56.964 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:22:56.967 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:22:56.972 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:22:57.041 -05:00 [ERR] Error al actualizar persona con ID 18.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:22:57.044 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:22:57.044 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 84.7759ms
2025-02-05 15:22:57.044 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:22:57.044 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/18 responded 500 in 85.8432 ms
2025-02-05 15:22:57.045 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/18 - 500 null text/plain; charset=utf-8 86.3941ms
2025-02-05 15:22:59.797 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/18 - application/json 297
2025-02-05 15:22:59.797 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:22:59.798 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:22:59.798 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:22:59.800 -05:00 [INF] Actualizando persona con ID: 18
2025-02-05 15:22:59.805 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:22:59.810 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:22:59.814 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:22:59.875 -05:00 [ERR] Error al actualizar persona con ID 18.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:22:59.878 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:22:59.878 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 79.7229ms
2025-02-05 15:22:59.878 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:22:59.879 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/18 responded 500 in 81.3957 ms
2025-02-05 15:22:59.879 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/18 - 500 null text/plain; charset=utf-8 82.3564ms
2025-02-05 15:23:08.006 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/18 - null null
2025-02-05 15:23:08.007 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:23:08.007 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/18 responded 204 in 0.6655 ms
2025-02-05 15:23:08.008 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/18 - 204 null null 1.5128ms
2025-02-05 15:23:08.011 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/18 - application/json 297
2025-02-05 15:23:08.012 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:23:08.013 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:23:08.013 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:23:08.015 -05:00 [INF] Actualizando persona con ID: 18
2025-02-05 15:23:08.020 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:23:08.025 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:23:08.032 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:23:08.108 -05:00 [ERR] Error al actualizar persona con ID 18.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:23:08.111 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:23:08.112 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 98.4057ms
2025-02-05 15:23:08.112 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:23:08.112 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/18 responded 500 in 100.8199 ms
2025-02-05 15:23:08.113 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/18 - 500 null text/plain; charset=utf-8 101.4471ms
2025-02-05 15:23:32.442 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/2 - null null
2025-02-05 15:23:32.443 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:23:32.445 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/2 responded 204 in 1.7244 ms
2025-02-05 15:23:32.445 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/2 - 204 null null 3.6728ms
2025-02-05 15:23:32.455 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/2 - application/json 282
2025-02-05 15:23:32.456 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:23:32.456 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:23:32.456 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:23:32.458 -05:00 [INF] Actualizando persona con ID: 2
2025-02-05 15:23:32.468 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:23:32.480 -05:00 [INF] Executed DbCommand (11ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:23:32.485 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:23:32.554 -05:00 [ERR] Error al actualizar persona con ID 2.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:23:32.557 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:23:32.558 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 101.3358ms
2025-02-05 15:23:32.558 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:23:32.558 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/2 responded 500 in 102.3076 ms
2025-02-05 15:23:32.558 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/2 - 500 null text/plain; charset=utf-8 103.059ms
2025-02-05 15:23:35.928 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/2 - application/json 282
2025-02-05 15:23:35.928 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:23:35.929 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:23:35.929 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:23:35.930 -05:00 [INF] Actualizando persona con ID: 2
2025-02-05 15:23:35.933 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:23:35.939 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:23:35.948 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:23:36.037 -05:00 [ERR] Error al actualizar persona con ID 2.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:23:36.040 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:23:36.041 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 112.3355ms
2025-02-05 15:23:36.041 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:23:36.042 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/2 responded 500 in 113.6683 ms
2025-02-05 15:23:36.042 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/2 - 500 null text/plain; charset=utf-8 114.4932ms
2025-02-05 15:23:59.220 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - null null
2025-02-05 15:23:59.221 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:23:59.221 -05:00 [INF] HTTP OPTIONS /api/Control/ValidarToken responded 204 in 0.1752 ms
2025-02-05 15:23:59.221 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - 204 null null 0.7527ms
2025-02-05 15:23:59.224 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - null null
2025-02-05 15:23:59.224 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:23:59.225 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:23:59.225 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:23:59.226 -05:00 [INF] Validando token JWT.
2025-02-05 15:23:59.226 -05:00 [INF] Validando token JWT.
2025-02-05 15:23:59.226 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:23:59.226 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:23:59.227 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:23:59.227 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 2.2272ms
2025-02-05 15:23:59.227 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:23:59.228 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 3.1698 ms
2025-02-05 15:23:59.228 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - 200 null application/json; charset=utf-8 3.805ms
2025-02-05 15:23:59.261 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:23:59.262 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:23:59.262 -05:00 [INF] HTTP OPTIONS /api/personas/Lista responded 204 in 0.4341 ms
2025-02-05 15:23:59.263 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - 204 null null 1.458ms
2025-02-05 15:23:59.267 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:23:59.267 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:23:59.267 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:23:59.268 -05:00 [INF] Route matched with {action = "Lista", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Lista(Int32, Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:23:59.268 -05:00 [INF] Obteniendo lista de personas.
2025-02-05 15:23:59.276 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Int32), p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC ConsultarPersonas @PageNumber = @p0, @PageSize = @p1
2025-02-05 15:23:59.277 -05:00 [INF] Lista de personas obtenida exitosamente.
2025-02-05 15:23:59.277 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[API_Secure.Models.Persona, API-Secure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-05 15:23:59.280 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Lista (API-Secure) in 12.5602ms
2025-02-05 15:23:59.280 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:23:59.280 -05:00 [INF] HTTP GET /api/personas/Lista responded 200 in 13.7303 ms
2025-02-05 15:23:59.281 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/personas/Lista - 200 null application/json; charset=utf-8 14.631ms
2025-02-05 15:24:02.535 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Eliminar/18 - null null
2025-02-05 15:24:02.535 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:02.536 -05:00 [INF] HTTP OPTIONS /api/personas/Eliminar/18 responded 204 in 0.3477 ms
2025-02-05 15:24:02.536 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Eliminar/18 - 204 null null 0.9228ms
2025-02-05 15:24:02.538 -05:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5925/api/personas/Eliminar/18 - null null
2025-02-05 15:24:02.539 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:02.539 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Eliminar (API-Secure)'
2025-02-05 15:24:02.546 -05:00 [INF] Route matched with {action = "Eliminar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Eliminar(Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:02.547 -05:00 [INF] Eliminando persona con ID: 18
2025-02-05 15:24:02.549 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:02.567 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Personas]
OUTPUT 1
WHERE [Identificador] = @p0;
2025-02-05 15:24:02.571 -05:00 [INF] Persona con ID 18 eliminada exitosamente.
2025-02-05 15:24:02.574 -05:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-02-05 15:24:02.574 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Eliminar (API-Secure) in 28.4292ms
2025-02-05 15:24:02.574 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Eliminar (API-Secure)'
2025-02-05 15:24:02.574 -05:00 [INF] HTTP DELETE /api/personas/Eliminar/18 responded 200 in 35.7219 ms
2025-02-05 15:24:02.575 -05:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5925/api/personas/Eliminar/18 - 200 null null 36.4563ms
2025-02-05 15:24:10.079 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - null null
2025-02-05 15:24:10.079 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:10.079 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/11 responded 204 in 0.1499 ms
2025-02-05 15:24:10.079 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - 204 null null 0.5792ms
2025-02-05 15:24:10.081 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 282
2025-02-05 15:24:10.081 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:10.081 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:10.082 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:10.082 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:24:10.085 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:10.089 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:24:10.090 -05:00 [INF] Persona con ID 11 actualizada exitosamente.
2025-02-05 15:24:10.091 -05:00 [INF] Executing OkObjectResult, writing value of type 'API_Secure.Models.Persona'.
2025-02-05 15:24:10.091 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 9.7991ms
2025-02-05 15:24:10.091 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:10.092 -05:00 [INF] HTTP PUT /api/personas/Actualizar/11 responded 200 in 10.5083 ms
2025-02-05 15:24:10.092 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 200 null application/json; charset=utf-8 10.953ms
2025-02-05 15:24:23.039 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/1 - null null
2025-02-05 15:24:23.039 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:23.040 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/1 responded 204 in 0.3397 ms
2025-02-05 15:24:23.040 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/1 - 204 null null 0.8966ms
2025-02-05 15:24:23.043 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/1 - application/json 273
2025-02-05 15:24:23.044 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:23.044 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:23.045 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:23.046 -05:00 [INF] Actualizando persona con ID: 1
2025-02-05 15:24:23.049 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:23.054 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:24:23.055 -05:00 [INF] Persona con ID 1 actualizada exitosamente.
2025-02-05 15:24:23.055 -05:00 [INF] Executing OkObjectResult, writing value of type 'API_Secure.Models.Persona'.
2025-02-05 15:24:23.056 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 10.9557ms
2025-02-05 15:24:23.057 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:23.057 -05:00 [INF] HTTP PUT /api/personas/Actualizar/1 responded 200 in 13.5281 ms
2025-02-05 15:24:23.058 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/1 - 200 null application/json; charset=utf-8 14.3521ms
2025-02-05 15:24:31.332 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/1 - null null
2025-02-05 15:24:31.332 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:31.332 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/1 responded 204 in 0.1428 ms
2025-02-05 15:24:31.332 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/1 - 204 null null 0.6662ms
2025-02-05 15:24:31.334 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/1 - application/json 274
2025-02-05 15:24:31.334 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:31.335 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:31.335 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:31.336 -05:00 [INF] Actualizando persona con ID: 1
2025-02-05 15:24:31.341 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:31.347 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:24:31.348 -05:00 [INF] Persona con ID 1 actualizada exitosamente.
2025-02-05 15:24:31.348 -05:00 [INF] Executing OkObjectResult, writing value of type 'API_Secure.Models.Persona'.
2025-02-05 15:24:31.349 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 13.153ms
2025-02-05 15:24:31.349 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:31.349 -05:00 [INF] HTTP PUT /api/personas/Actualizar/1 responded 200 in 14.8017 ms
2025-02-05 15:24:31.350 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/1 - 200 null application/json; charset=utf-8 15.5698ms
2025-02-05 15:24:35.301 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - null null
2025-02-05 15:24:35.301 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:35.301 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/11 responded 204 in 0.3506 ms
2025-02-05 15:24:35.302 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - 204 null null 0.9222ms
2025-02-05 15:24:35.303 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 275
2025-02-05 15:24:35.304 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:35.304 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:35.304 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:35.305 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:24:35.309 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:35.311 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:24:35.316 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:24:35.372 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:24:35.375 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:24:35.375 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 70.9051ms
2025-02-05 15:24:35.375 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:35.376 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 72.1131 ms
2025-02-05 15:24:35.376 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 72.6399ms
2025-02-05 15:24:36.019 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 275
2025-02-05 15:24:36.020 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:36.020 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:36.020 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:36.020 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:24:36.024 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:36.028 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:24:36.032 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:24:36.105 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:24:36.107 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:24:36.107 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 87.2121ms
2025-02-05 15:24:36.107 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:36.107 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 87.9212 ms
2025-02-05 15:24:36.108 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 88.3827ms
2025-02-05 15:24:36.259 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 275
2025-02-05 15:24:36.260 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:36.260 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:36.260 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:36.261 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:24:36.264 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:36.268 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:24:36.271 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:24:36.326 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:24:36.329 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:24:36.330 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 69.3408ms
2025-02-05 15:24:36.330 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:36.330 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 70.3134 ms
2025-02-05 15:24:36.330 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 70.8109ms
2025-02-05 15:24:36.468 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 275
2025-02-05 15:24:36.468 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:36.469 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:36.469 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:36.469 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:24:36.472 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:36.476 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:24:36.479 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:24:36.545 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:24:36.547 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:24:36.548 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 78.6352ms
2025-02-05 15:24:36.548 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:36.548 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 79.3494 ms
2025-02-05 15:24:36.548 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 79.8743ms
2025-02-05 15:24:36.715 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 275
2025-02-05 15:24:36.715 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:36.716 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:36.716 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:36.716 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:24:36.720 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:36.722 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:24:36.726 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:24:36.795 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:24:36.798 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:24:36.798 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 82.1845ms
2025-02-05 15:24:36.798 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:36.798 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 83.3916 ms
2025-02-05 15:24:36.799 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 83.8441ms
2025-02-05 15:24:36.987 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 275
2025-02-05 15:24:36.987 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:36.987 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:36.988 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:36.988 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:24:36.991 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:36.994 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:24:36.999 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:24:37.076 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:24:37.081 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:24:37.081 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 93.5892ms
2025-02-05 15:24:37.081 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:37.081 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 94.4973 ms
2025-02-05 15:24:37.082 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 94.9168ms
2025-02-05 15:24:37.349 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 275
2025-02-05 15:24:37.349 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:37.350 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:37.350 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:37.350 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:24:37.355 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:37.365 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:24:37.369 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:24:37.423 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:24:37.426 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:24:37.426 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 76.5063ms
2025-02-05 15:24:37.426 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:37.427 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 77.3672 ms
2025-02-05 15:24:37.427 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 77.9356ms
2025-02-05 15:24:37.619 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 275
2025-02-05 15:24:37.619 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:37.619 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:37.619 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:37.620 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:24:37.622 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:37.626 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:24:37.630 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:24:37.692 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:24:37.694 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:24:37.695 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 75.2885ms
2025-02-05 15:24:37.695 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:37.695 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 76.1615 ms
2025-02-05 15:24:37.695 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 76.5922ms
2025-02-05 15:24:37.916 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 275
2025-02-05 15:24:37.916 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:37.917 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:37.917 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:37.918 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:24:37.922 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:37.925 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:24:37.928 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:24:37.991 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:24:37.993 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:24:37.993 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 76.5191ms
2025-02-05 15:24:37.994 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:37.994 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 77.6998 ms
2025-02-05 15:24:37.994 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 78.237ms
2025-02-05 15:24:38.203 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 275
2025-02-05 15:24:38.203 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:38.204 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:38.204 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:38.204 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:24:38.207 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:38.211 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:24:38.214 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:24:38.268 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:24:38.270 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:24:38.271 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 66.8268ms
2025-02-05 15:24:38.271 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:38.271 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 67.6406 ms
2025-02-05 15:24:38.271 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 68.1316ms
2025-02-05 15:24:38.476 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 275
2025-02-05 15:24:38.476 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:38.476 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:38.476 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:38.477 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:24:38.480 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:38.483 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:24:38.487 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:24:38.545 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:24:38.548 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:24:38.548 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 71.5197ms
2025-02-05 15:24:38.548 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:38.548 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 72.3124 ms
2025-02-05 15:24:38.548 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 72.7214ms
2025-02-05 15:24:38.732 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 275
2025-02-05 15:24:38.732 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:38.733 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:38.733 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:38.734 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:24:38.736 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:38.742 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:24:38.747 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:24:38.815 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:24:38.818 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:24:38.819 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 85.6323ms
2025-02-05 15:24:38.819 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:38.819 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 86.5581 ms
2025-02-05 15:24:38.819 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 86.9947ms
2025-02-05 15:24:38.956 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 275
2025-02-05 15:24:38.956 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:38.957 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:38.957 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:38.957 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:24:38.963 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:38.967 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:24:38.971 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:24:39.027 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:24:39.031 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:24:39.031 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 73.9969ms
2025-02-05 15:24:39.031 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:39.031 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 75.2826 ms
2025-02-05 15:24:39.031 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 75.6634ms
2025-02-05 15:24:39.180 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 275
2025-02-05 15:24:39.180 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:39.181 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:39.181 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:39.182 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:24:39.187 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:39.192 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:24:39.197 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:24:39.261 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:24:39.264 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:24:39.264 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 83.2929ms
2025-02-05 15:24:39.264 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:39.264 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 84.4607 ms
2025-02-05 15:24:39.265 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 84.9282ms
2025-02-05 15:24:40.939 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - null null
2025-02-05 15:24:40.939 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:40.939 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/11 responded 204 in 0.1168 ms
2025-02-05 15:24:40.940 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - 204 null null 0.5269ms
2025-02-05 15:24:40.942 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 275
2025-02-05 15:24:40.942 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:40.943 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:40.943 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:40.944 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:24:40.947 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:40.951 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:24:40.956 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:24:41.025 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:24:41.027 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:24:41.028 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 84.1236ms
2025-02-05 15:24:41.028 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:41.028 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 85.6591 ms
2025-02-05 15:24:41.028 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 86.1951ms
2025-02-05 15:24:45.531 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 281
2025-02-05 15:24:45.532 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:45.533 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:45.533 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:45.533 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:24:45.536 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:45.540 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:24:45.540 -05:00 [INF] Persona con ID 11 actualizada exitosamente.
2025-02-05 15:24:45.540 -05:00 [INF] Executing OkObjectResult, writing value of type 'API_Secure.Models.Persona'.
2025-02-05 15:24:45.541 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 7.8604ms
2025-02-05 15:24:45.541 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:45.541 -05:00 [INF] HTTP PUT /api/personas/Actualizar/11 responded 200 in 9.2491 ms
2025-02-05 15:24:45.541 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 200 null application/json; charset=utf-8 9.9946ms
2025-02-05 15:24:58.200 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - null null
2025-02-05 15:24:58.200 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:58.200 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/11 responded 204 in 0.1813 ms
2025-02-05 15:24:58.201 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - 204 null null 0.946ms
2025-02-05 15:24:58.204 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 279
2025-02-05 15:24:58.205 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:58.205 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:58.205 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:58.206 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:24:58.209 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:58.213 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:24:58.217 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:24:58.271 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:24:58.274 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:24:58.274 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 68.7566ms
2025-02-05 15:24:58.274 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:58.274 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 69.8379 ms
2025-02-05 15:24:58.275 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 70.2309ms
2025-02-05 15:24:58.627 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 279
2025-02-05 15:24:58.627 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:58.628 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:58.628 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:58.628 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:24:58.631 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:58.635 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:24:58.656 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:24:58.717 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:24:58.719 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:24:58.719 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 91.3216ms
2025-02-05 15:24:58.719 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:58.719 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 92.0069 ms
2025-02-05 15:24:58.720 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 92.3726ms
2025-02-05 15:24:58.827 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 279
2025-02-05 15:24:58.827 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:58.827 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:58.827 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:58.828 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:24:58.830 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:58.833 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:24:58.837 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:24:58.889 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:24:58.892 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:24:58.892 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 65.1224ms
2025-02-05 15:24:58.893 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:58.893 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 66.0077 ms
2025-02-05 15:24:58.893 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 66.3853ms
2025-02-05 15:24:59.027 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 279
2025-02-05 15:24:59.028 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:59.028 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:59.028 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:59.029 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:24:59.031 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:59.034 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:24:59.038 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:24:59.103 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:24:59.105 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:24:59.105 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 77.5432ms
2025-02-05 15:24:59.106 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:59.106 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 78.0486 ms
2025-02-05 15:24:59.106 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 78.4228ms
2025-02-05 15:24:59.227 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 279
2025-02-05 15:24:59.228 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:59.228 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:59.228 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:59.228 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:24:59.230 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:59.233 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:24:59.237 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:24:59.289 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:24:59.291 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:24:59.291 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 63.1257ms
2025-02-05 15:24:59.291 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:59.291 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 63.6626 ms
2025-02-05 15:24:59.291 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 64.0006ms
2025-02-05 15:24:59.458 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 279
2025-02-05 15:24:59.459 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:59.459 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:59.459 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:59.459 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:24:59.463 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:59.465 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:24:59.469 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:24:59.525 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:24:59.527 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:24:59.527 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 68.1264ms
2025-02-05 15:24:59.527 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:59.527 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 68.8671 ms
2025-02-05 15:24:59.528 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 69.1991ms
2025-02-05 15:24:59.676 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 279
2025-02-05 15:24:59.676 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:59.676 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:59.676 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:59.677 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:24:59.679 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:59.682 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:24:59.685 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:24:59.742 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:24:59.745 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:24:59.745 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 68.9045ms
2025-02-05 15:24:59.745 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:59.745 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 69.6622 ms
2025-02-05 15:24:59.746 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 70.2048ms
2025-02-05 15:24:59.867 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 279
2025-02-05 15:24:59.867 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:24:59.867 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:59.868 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:24:59.868 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:24:59.870 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:24:59.873 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:24:59.876 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:24:59.925 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6e8397c3-7b27-40aa-9a0f-002b204fdaf8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:24:59.928 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:24:59.929 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 61.1348ms
2025-02-05 15:24:59.929 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:24:59.929 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 61.6115 ms
2025-02-05 15:24:59.929 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 62.0081ms
2025-02-05 15:25:09.043 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - null null
2025-02-05 15:25:09.043 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:25:09.043 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/11 responded 204 in 0.3964 ms
2025-02-05 15:25:09.044 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - 204 null null 0.9823ms
2025-02-05 15:25:09.046 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 281
2025-02-05 15:25:09.046 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:25:09.046 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:25:09.046 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:25:09.046 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:25:09.050 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:25:09.052 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:25:09.053 -05:00 [INF] Persona con ID 11 actualizada exitosamente.
2025-02-05 15:25:09.053 -05:00 [INF] Executing OkObjectResult, writing value of type 'API_Secure.Models.Persona'.
2025-02-05 15:25:09.053 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 7.0724ms
2025-02-05 15:25:09.053 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:25:09.053 -05:00 [INF] HTTP PUT /api/personas/Actualizar/11 responded 200 in 7.5568 ms
2025-02-05 15:25:09.054 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 200 null application/json; charset=utf-8 7.9313ms
2025-02-05 15:30:09.325 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - null null
2025-02-05 15:30:09.326 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:30:09.326 -05:00 [INF] HTTP OPTIONS /api/Control/ValidarToken responded 204 in 0.3875 ms
2025-02-05 15:30:09.326 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - 204 null null 1.122ms
2025-02-05 15:30:09.331 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - null null
2025-02-05 15:30:09.332 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:30:09.333 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:30:09.333 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:30:09.334 -05:00 [INF] Validando token JWT.
2025-02-05 15:30:09.334 -05:00 [INF] Validando token JWT.
2025-02-05 15:30:09.334 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:30:09.334 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:30:09.334 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:30:09.336 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 3.5629ms
2025-02-05 15:30:09.337 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:30:09.337 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 5.1303 ms
2025-02-05 15:30:09.337 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - 200 null application/json; charset=utf-8 5.6626ms
2025-02-05 15:30:09.409 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - null null
2025-02-05 15:30:09.410 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:30:09.410 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:30:09.410 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:30:09.411 -05:00 [INF] Validando token JWT.
2025-02-05 15:30:09.412 -05:00 [INF] Validando token JWT.
2025-02-05 15:30:09.412 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:30:09.412 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:30:09.413 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:30:09.413 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 3.009ms
2025-02-05 15:30:09.413 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:30:09.413 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 3.8802 ms
2025-02-05 15:30:09.414 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - 200 null application/json; charset=utf-8 4.3861ms
2025-02-05 15:30:09.419 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:30:09.420 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:30:09.420 -05:00 [INF] HTTP OPTIONS /api/personas/Lista responded 204 in 0.0962 ms
2025-02-05 15:30:09.420 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - 204 null null 3.3183ms
2025-02-05 15:30:09.424 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:30:09.425 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:30:09.426 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:30:09.426 -05:00 [INF] Route matched with {action = "Lista", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Lista(Int32, Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:30:09.427 -05:00 [INF] Obteniendo lista de personas.
2025-02-05 15:30:09.467 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[p0='?' (DbType = Int32), p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC ConsultarPersonas @PageNumber = @p0, @PageSize = @p1
2025-02-05 15:30:09.468 -05:00 [INF] Lista de personas obtenida exitosamente.
2025-02-05 15:30:09.468 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[API_Secure.Models.Persona, API-Secure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-05 15:30:09.469 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Lista (API-Secure) in 42.3631ms
2025-02-05 15:30:09.469 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:30:09.469 -05:00 [INF] HTTP GET /api/personas/Lista responded 200 in 44.3933 ms
2025-02-05 15:30:09.469 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/personas/Lista - 200 null application/json; charset=utf-8 45.0076ms
2025-02-05 15:30:09.494 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:30:09.494 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:30:09.495 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:30:09.495 -05:00 [INF] Route matched with {action = "Lista", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Lista(Int32, Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:30:09.495 -05:00 [INF] Obteniendo lista de personas.
2025-02-05 15:30:09.499 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Int32), p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC ConsultarPersonas @PageNumber = @p0, @PageSize = @p1
2025-02-05 15:30:09.502 -05:00 [INF] Lista de personas obtenida exitosamente.
2025-02-05 15:30:09.506 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[API_Secure.Models.Persona, API-Secure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-05 15:30:09.512 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Lista (API-Secure) in 16.7878ms
2025-02-05 15:30:09.512 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:30:09.512 -05:00 [INF] HTTP GET /api/personas/Lista responded 200 in 17.5257 ms
2025-02-05 15:30:09.512 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/personas/Lista - 200 null application/json; charset=utf-8 18.0434ms
2025-02-05 15:30:11.624 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - null null
2025-02-05 15:30:11.624 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:30:11.625 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:30:11.625 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:30:11.625 -05:00 [INF] Validando token JWT.
2025-02-05 15:30:11.625 -05:00 [INF] Validando token JWT.
2025-02-05 15:30:11.625 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:30:11.626 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:30:11.626 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:30:11.626 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 1.5015ms
2025-02-05 15:30:11.626 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:30:11.626 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 2.1978 ms
2025-02-05 15:30:11.627 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - 200 null application/json; charset=utf-8 3.1441ms
2025-02-05 15:30:11.644 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:30:11.645 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:30:11.647 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:30:11.647 -05:00 [INF] Route matched with {action = "Lista", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Lista(Int32, Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:30:11.647 -05:00 [INF] Obteniendo lista de personas.
2025-02-05 15:30:11.656 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[p0='?' (DbType = Int32), p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC ConsultarPersonas @PageNumber = @p0, @PageSize = @p1
2025-02-05 15:30:11.658 -05:00 [INF] Lista de personas obtenida exitosamente.
2025-02-05 15:30:11.658 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[API_Secure.Models.Persona, API-Secure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-05 15:30:11.662 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Lista (API-Secure) in 14.7791ms
2025-02-05 15:30:11.662 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:30:11.662 -05:00 [INF] HTTP GET /api/personas/Lista responded 200 in 17.2613 ms
2025-02-05 15:30:11.662 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/personas/Lista - 200 null application/json; charset=utf-8 18.0693ms
2025-02-05 15:30:12.837 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - null null
2025-02-05 15:30:12.837 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:30:12.838 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:30:12.838 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:30:12.838 -05:00 [INF] Validando token JWT.
2025-02-05 15:30:12.838 -05:00 [INF] Validando token JWT.
2025-02-05 15:30:12.838 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:30:12.839 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:30:12.839 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:30:12.840 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 2.4743ms
2025-02-05 15:30:12.840 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:30:12.840 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 3.3616 ms
2025-02-05 15:30:12.841 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - 200 null application/json; charset=utf-8 3.7767ms
2025-02-05 15:30:12.886 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:30:12.887 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:30:12.887 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:30:12.887 -05:00 [INF] Route matched with {action = "Lista", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Lista(Int32, Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:30:12.889 -05:00 [INF] Obteniendo lista de personas.
2025-02-05 15:30:12.891 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[p0='?' (DbType = Int32), p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC ConsultarPersonas @PageNumber = @p0, @PageSize = @p1
2025-02-05 15:30:12.893 -05:00 [INF] Lista de personas obtenida exitosamente.
2025-02-05 15:30:12.893 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[API_Secure.Models.Persona, API-Secure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-05 15:30:12.894 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Lista (API-Secure) in 6.2441ms
2025-02-05 15:30:12.894 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:30:12.894 -05:00 [INF] HTTP GET /api/personas/Lista responded 200 in 7.3291 ms
2025-02-05 15:30:12.894 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/personas/Lista - 200 null application/json; charset=utf-8 7.8346ms
2025-02-05 15:30:18.316 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Eliminar/1 - null null
2025-02-05 15:30:18.316 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:30:18.316 -05:00 [INF] HTTP OPTIONS /api/personas/Eliminar/1 responded 204 in 0.1748 ms
2025-02-05 15:30:18.316 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Eliminar/1 - 204 null null 0.7028ms
2025-02-05 15:30:18.318 -05:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5925/api/personas/Eliminar/1 - null null
2025-02-05 15:30:18.319 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:30:18.319 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Eliminar (API-Secure)'
2025-02-05 15:30:18.319 -05:00 [INF] Route matched with {action = "Eliminar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Eliminar(Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:30:18.319 -05:00 [INF] Eliminando persona con ID: 1
2025-02-05 15:30:18.324 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:30:18.327 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Personas]
OUTPUT 1
WHERE [Identificador] = @p0;
2025-02-05 15:30:18.328 -05:00 [INF] Persona con ID 1 eliminada exitosamente.
2025-02-05 15:30:18.328 -05:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-02-05 15:30:18.328 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Eliminar (API-Secure) in 8.9346ms
2025-02-05 15:30:18.328 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Eliminar (API-Secure)'
2025-02-05 15:30:18.328 -05:00 [INF] HTTP DELETE /api/personas/Eliminar/1 responded 200 in 9.6862 ms
2025-02-05 15:30:18.329 -05:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5925/api/personas/Eliminar/1 - 200 null null 10.2785ms
2025-02-05 15:30:19.716 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - null null
2025-02-05 15:30:19.716 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:30:19.716 -05:00 [INF] HTTP OPTIONS /api/Control/ValidarToken responded 204 in 0.0653 ms
2025-02-05 15:30:19.717 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - 204 null null 0.5136ms
2025-02-05 15:30:19.718 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - null null
2025-02-05 15:30:19.718 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:30:19.718 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:30:19.719 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:30:19.719 -05:00 [INF] Validando token JWT.
2025-02-05 15:30:19.719 -05:00 [INF] Validando token JWT.
2025-02-05 15:30:19.719 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:30:19.719 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:30:19.719 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:30:19.720 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 1.1672ms
2025-02-05 15:30:19.720 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:30:19.720 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 1.7359 ms
2025-02-05 15:30:19.720 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - 200 null application/json; charset=utf-8 2.0038ms
2025-02-05 15:30:19.774 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:30:19.774 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:30:19.775 -05:00 [INF] HTTP OPTIONS /api/personas/Lista responded 204 in 0.1710 ms
2025-02-05 15:30:19.775 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - 204 null null 0.6034ms
2025-02-05 15:30:19.777 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:30:19.777 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:30:19.778 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:30:19.778 -05:00 [INF] Route matched with {action = "Lista", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Lista(Int32, Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:30:19.778 -05:00 [INF] Obteniendo lista de personas.
2025-02-05 15:30:19.780 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[p0='?' (DbType = Int32), p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC ConsultarPersonas @PageNumber = @p0, @PageSize = @p1
2025-02-05 15:30:19.783 -05:00 [INF] Lista de personas obtenida exitosamente.
2025-02-05 15:30:19.783 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[API_Secure.Models.Persona, API-Secure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-05 15:30:19.784 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Lista (API-Secure) in 6.6ms
2025-02-05 15:30:19.785 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:30:19.785 -05:00 [INF] HTTP GET /api/personas/Lista responded 200 in 8.2394 ms
2025-02-05 15:30:19.785 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/personas/Lista - 200 null application/json; charset=utf-8 8.7904ms
2025-02-05 15:30:20.472 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - null null
2025-02-05 15:30:20.473 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:30:20.473 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:30:20.473 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:30:20.474 -05:00 [INF] Validando token JWT.
2025-02-05 15:30:20.474 -05:00 [INF] Validando token JWT.
2025-02-05 15:30:20.474 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:30:20.474 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:30:20.474 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:30:20.474 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 1.111ms
2025-02-05 15:30:20.475 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:30:20.475 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 2.0014 ms
2025-02-05 15:30:20.475 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - 200 null application/json; charset=utf-8 2.2698ms
2025-02-05 15:30:20.500 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:30:20.500 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:30:20.501 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:30:20.501 -05:00 [INF] Route matched with {action = "Lista", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Lista(Int32, Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:30:20.501 -05:00 [INF] Obteniendo lista de personas.
2025-02-05 15:30:20.504 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[p0='?' (DbType = Int32), p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC ConsultarPersonas @PageNumber = @p0, @PageSize = @p1
2025-02-05 15:30:20.505 -05:00 [INF] Lista de personas obtenida exitosamente.
2025-02-05 15:30:20.506 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[API_Secure.Models.Persona, API-Secure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-05 15:30:20.507 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Lista (API-Secure) in 5.9112ms
2025-02-05 15:30:20.507 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:30:20.508 -05:00 [INF] HTTP GET /api/personas/Lista responded 200 in 7.3128 ms
2025-02-05 15:30:20.508 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/personas/Lista - 200 null application/json; charset=utf-8 8.2558ms
2025-02-05 15:30:27.448 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - null null
2025-02-05 15:30:27.448 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:30:27.448 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/11 responded 204 in 0.0510 ms
2025-02-05 15:30:27.449 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - 204 null null 0.5242ms
2025-02-05 15:30:27.452 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 279
2025-02-05 15:30:27.452 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:30:27.453 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:30:27.453 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:30:27.453 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:30:27.458 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:30:27.467 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:30:27.474 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:30:27.529 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:30:27.531 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:30:27.532 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 78.8505ms
2025-02-05 15:30:27.532 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:30:27.532 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 79.6783 ms
2025-02-05 15:30:27.532 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 80.0286ms
2025-02-05 15:30:28.204 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 279
2025-02-05 15:30:28.204 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:30:28.204 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:30:28.204 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:30:28.204 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:30:28.207 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:30:28.210 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:30:28.214 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:30:28.264 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:30:28.266 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:30:28.267 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 62.6595ms
2025-02-05 15:30:28.267 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:30:28.267 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 63.0643 ms
2025-02-05 15:30:28.267 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 63.393ms
2025-02-05 15:30:28.428 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 279
2025-02-05 15:30:28.428 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:30:28.428 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:30:28.428 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:30:28.429 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:30:28.431 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:30:28.435 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:30:28.439 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:30:28.491 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:30:28.494 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:30:28.495 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 66.4785ms
2025-02-05 15:30:28.495 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:30:28.495 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 66.9583 ms
2025-02-05 15:30:28.495 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 67.317ms
2025-02-05 15:30:31.677 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 282
2025-02-05 15:30:31.677 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:30:31.678 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:30:31.678 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:30:31.678 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:30:31.682 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:30:31.685 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:30:31.685 -05:00 [INF] Persona con ID 11 actualizada exitosamente.
2025-02-05 15:30:31.685 -05:00 [INF] Executing OkObjectResult, writing value of type 'API_Secure.Models.Persona'.
2025-02-05 15:30:31.686 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 8.3362ms
2025-02-05 15:30:31.686 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:30:31.686 -05:00 [INF] HTTP PUT /api/personas/Actualizar/11 responded 200 in 9.0914 ms
2025-02-05 15:30:31.688 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 200 null application/json; charset=utf-8 10.7499ms
2025-02-05 15:31:29.894 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - null null
2025-02-05 15:31:29.896 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:31:29.896 -05:00 [INF] HTTP OPTIONS /api/Control/ValidarToken responded 204 in 0.1493 ms
2025-02-05 15:31:29.897 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - 204 null null 2.3514ms
2025-02-05 15:31:29.903 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - null null
2025-02-05 15:31:29.903 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:31:29.904 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:31:29.904 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:31:29.904 -05:00 [INF] Validando token JWT.
2025-02-05 15:31:29.904 -05:00 [INF] Validando token JWT.
2025-02-05 15:31:29.904 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:31:29.904 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:31:29.904 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:31:29.908 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 4.4835ms
2025-02-05 15:31:29.908 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:31:29.908 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 5.2462 ms
2025-02-05 15:31:29.909 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - 200 null application/json; charset=utf-8 5.7826ms
2025-02-05 15:31:29.956 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:31:29.956 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:31:29.956 -05:00 [INF] HTTP OPTIONS /api/personas/Lista responded 204 in 0.0695 ms
2025-02-05 15:31:29.957 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - 204 null null 0.5084ms
2025-02-05 15:31:29.962 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:31:29.962 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:31:29.963 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:31:29.963 -05:00 [INF] Route matched with {action = "Lista", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Lista(Int32, Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:31:29.964 -05:00 [INF] Obteniendo lista de personas.
2025-02-05 15:31:29.973 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[p0='?' (DbType = Int32), p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC ConsultarPersonas @PageNumber = @p0, @PageSize = @p1
2025-02-05 15:31:29.978 -05:00 [INF] Lista de personas obtenida exitosamente.
2025-02-05 15:31:29.979 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[API_Secure.Models.Persona, API-Secure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-05 15:31:29.981 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Lista (API-Secure) in 17.3667ms
2025-02-05 15:31:29.981 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:31:29.981 -05:00 [INF] HTTP GET /api/personas/Lista responded 200 in 19.1408 ms
2025-02-05 15:31:29.981 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/personas/Lista - 200 null application/json; charset=utf-8 19.6551ms
2025-02-05 15:31:58.663 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - null null
2025-02-05 15:31:58.666 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:31:58.666 -05:00 [INF] HTTP OPTIONS /api/Control/ValidarToken responded 204 in 0.1267 ms
2025-02-05 15:31:58.666 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - 204 null null 3.6426ms
2025-02-05 15:31:58.675 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - null null
2025-02-05 15:31:58.677 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:31:58.678 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:31:58.679 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:31:58.718 -05:00 [INF] Validando token JWT.
2025-02-05 15:31:58.718 -05:00 [INF] Validando token JWT.
2025-02-05 15:31:58.718 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:31:58.718 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:31:58.718 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:31:58.719 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 40.5636ms
2025-02-05 15:31:58.719 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:31:58.719 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 42.1037 ms
2025-02-05 15:31:58.720 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - 200 null application/json; charset=utf-8 44.2676ms
2025-02-05 15:31:58.756 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:31:58.757 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:31:58.757 -05:00 [INF] HTTP OPTIONS /api/personas/Lista responded 204 in 0.1160 ms
2025-02-05 15:31:58.757 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - 204 null null 0.7755ms
2025-02-05 15:31:58.762 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:31:58.762 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:31:58.763 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:31:58.763 -05:00 [INF] Route matched with {action = "Lista", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Lista(Int32, Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:31:58.763 -05:00 [INF] Obteniendo lista de personas.
2025-02-05 15:31:58.787 -05:00 [INF] Executed DbCommand (24ms) [Parameters=[p0='?' (DbType = Int32), p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC ConsultarPersonas @PageNumber = @p0, @PageSize = @p1
2025-02-05 15:31:58.788 -05:00 [INF] Lista de personas obtenida exitosamente.
2025-02-05 15:31:58.824 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[API_Secure.Models.Persona, API-Secure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-05 15:31:58.828 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Lista (API-Secure) in 65.5333ms
2025-02-05 15:31:58.828 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:31:58.828 -05:00 [INF] HTTP GET /api/personas/Lista responded 200 in 66.0511 ms
2025-02-05 15:31:58.829 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/personas/Lista - 200 null application/json; charset=utf-8 66.5098ms
2025-02-05 15:32:05.701 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - null null
2025-02-05 15:32:05.701 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:32:05.701 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/11 responded 204 in 0.0568 ms
2025-02-05 15:32:05.702 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - 204 null null 0.3612ms
2025-02-05 15:32:05.704 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 281
2025-02-05 15:32:05.704 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:32:05.705 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:05.705 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:32:05.705 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:32:05.716 -05:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:32:05.723 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:32:05.727 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:32:05.797 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:32:05.799 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:32:05.800 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 95.1047ms
2025-02-05 15:32:05.800 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:05.800 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 95.7073 ms
2025-02-05 15:32:05.800 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 96.0649ms
2025-02-05 15:32:06.212 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 281
2025-02-05 15:32:06.212 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:32:06.212 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:06.212 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:32:06.213 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:32:06.218 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:32:06.226 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:32:06.230 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:32:06.299 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:32:06.301 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:32:06.302 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 89.5208ms
2025-02-05 15:32:06.302 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:06.302 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 90.0400 ms
2025-02-05 15:32:06.302 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 90.3982ms
2025-02-05 15:32:12.693 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - null null
2025-02-05 15:32:12.693 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:32:12.693 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/11 responded 204 in 0.0934 ms
2025-02-05 15:32:12.693 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - 204 null null 0.5682ms
2025-02-05 15:32:12.695 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 285
2025-02-05 15:32:12.695 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:32:12.695 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:12.695 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:32:12.695 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:32:12.700 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:32:12.706 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:32:12.711 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:32:12.766 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:32:12.768 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:32:12.769 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 73.7729ms
2025-02-05 15:32:12.769 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:12.769 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 74.1165 ms
2025-02-05 15:32:12.769 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 74.4254ms
2025-02-05 15:32:13.421 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 285
2025-02-05 15:32:13.421 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:32:13.421 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:13.421 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:32:13.421 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:32:13.425 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:32:13.435 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:32:13.448 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:32:13.506 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:32:13.508 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:32:13.508 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 86.9697ms
2025-02-05 15:32:13.508 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:13.508 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 87.4921 ms
2025-02-05 15:32:13.509 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 87.826ms
2025-02-05 15:32:13.884 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 285
2025-02-05 15:32:13.884 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:32:13.884 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:13.884 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:32:13.885 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:32:13.888 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:32:13.892 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:32:13.895 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:32:13.950 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:32:13.951 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:32:13.952 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 67.5229ms
2025-02-05 15:32:13.952 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:13.952 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 68.0504 ms
2025-02-05 15:32:13.952 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 68.457ms
2025-02-05 15:32:15.923 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 285
2025-02-05 15:32:15.923 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:32:15.924 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:15.924 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:32:15.924 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:32:15.927 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:32:15.930 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:32:15.934 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:32:15.991 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:32:15.993 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:32:15.994 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 69.9532ms
2025-02-05 15:32:15.994 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:15.994 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 70.5610 ms
2025-02-05 15:32:15.994 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 70.9983ms
2025-02-05 15:32:16.107 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 285
2025-02-05 15:32:16.107 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:32:16.108 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:16.108 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:32:16.109 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:32:16.111 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:32:16.115 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:32:16.119 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:32:16.182 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:32:16.185 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:32:16.185 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 77.5303ms
2025-02-05 15:32:16.185 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:16.186 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 78.5376 ms
2025-02-05 15:32:16.186 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 79.001ms
2025-02-05 15:32:16.307 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 285
2025-02-05 15:32:16.307 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:32:16.307 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:16.307 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:32:16.308 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:32:16.310 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:32:16.313 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:32:16.318 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:32:16.374 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:32:16.375 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:32:16.376 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 68.235ms
2025-02-05 15:32:16.376 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:16.376 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 68.8025 ms
2025-02-05 15:32:16.376 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 69.4074ms
2025-02-05 15:32:16.491 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 285
2025-02-05 15:32:16.491 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:32:16.491 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:16.491 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:32:16.491 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:32:16.495 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:32:16.498 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:32:16.501 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:32:16.549 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:32:16.553 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:32:16.553 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 61.9746ms
2025-02-05 15:32:16.553 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:16.553 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 62.3342 ms
2025-02-05 15:32:16.554 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 62.6958ms
2025-02-05 15:32:16.682 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 285
2025-02-05 15:32:16.683 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:32:16.683 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:16.683 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:32:16.683 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:32:16.685 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:32:16.689 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:32:16.693 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:32:16.746 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:32:16.748 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:32:16.749 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 65.7701ms
2025-02-05 15:32:16.749 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:16.749 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 66.2900 ms
2025-02-05 15:32:16.749 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 66.6553ms
2025-02-05 15:32:29.909 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - null null
2025-02-05 15:32:29.909 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:32:29.909 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/11 responded 204 in 0.0510 ms
2025-02-05 15:32:29.909 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - 204 null null 0.6996ms
2025-02-05 15:32:29.911 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 284
2025-02-05 15:32:29.911 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:32:29.911 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:29.911 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:32:29.912 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:32:29.915 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:32:29.918 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:32:29.919 -05:00 [INF] Persona con ID 11 actualizada exitosamente.
2025-02-05 15:32:29.919 -05:00 [INF] Executing OkObjectResult, writing value of type 'API_Secure.Models.Persona'.
2025-02-05 15:32:29.920 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 8.2246ms
2025-02-05 15:32:29.920 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:29.920 -05:00 [INF] HTTP PUT /api/personas/Actualizar/11 responded 200 in 8.7984 ms
2025-02-05 15:32:29.920 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 200 null application/json; charset=utf-8 9.2253ms
2025-02-05 15:32:35.599 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - null null
2025-02-05 15:32:35.600 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:32:35.600 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/11 responded 204 in 0.0954 ms
2025-02-05 15:32:35.600 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - 204 null null 0.4357ms
2025-02-05 15:32:35.602 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 282
2025-02-05 15:32:35.602 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:32:35.602 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:35.602 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:32:35.603 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:32:35.606 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:32:35.611 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:32:35.615 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:32:35.669 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:32:35.671 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:32:35.671 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 68.7833ms
2025-02-05 15:32:35.671 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:35.671 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 69.1871 ms
2025-02-05 15:32:35.671 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 69.5123ms
2025-02-05 15:32:35.930 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 282
2025-02-05 15:32:35.930 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:32:35.931 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:35.931 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:32:35.931 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:32:35.935 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:32:35.938 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:32:35.942 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:32:35.995 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:32:35.998 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:32:35.999 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 67.8671ms
2025-02-05 15:32:35.999 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:35.999 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 68.3180 ms
2025-02-05 15:32:35.999 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 68.617ms
2025-02-05 15:32:36.131 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 282
2025-02-05 15:32:36.131 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:32:36.132 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:36.132 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:32:36.132 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:32:36.134 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:32:36.137 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:32:36.141 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:32:36.191 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:32:36.193 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:32:36.194 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 62.0149ms
2025-02-05 15:32:36.194 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:36.194 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 62.4241 ms
2025-02-05 15:32:36.194 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 62.7366ms
2025-02-05 15:32:36.323 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 282
2025-02-05 15:32:36.324 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:32:36.324 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:36.324 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:32:36.324 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:32:36.327 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:32:36.330 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:32:36.333 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:32:36.388 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:32:36.390 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:32:36.390 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 66.3355ms
2025-02-05 15:32:36.390 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:36.390 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 66.7088 ms
2025-02-05 15:32:36.390 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 67.0189ms
2025-02-05 15:32:36.596 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 282
2025-02-05 15:32:36.596 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:32:36.596 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:36.596 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:32:36.596 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:32:36.599 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:32:36.603 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:32:36.606 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:32:36.695 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:32:36.699 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:32:36.699 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 103.107ms
2025-02-05 15:32:36.699 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:32:36.699 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 103.5254 ms
2025-02-05 15:32:36.699 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 103.8552ms
2025-02-05 15:32:51.520 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - null null
2025-02-05 15:32:51.521 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:32:51.521 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/11 responded 204 in 0.4405 ms
2025-02-05 15:32:51.522 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - 204 null null 1.6416ms
2025-02-05 15:32:51.525 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 282
2025-02-05 15:32:51.525 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:32:51.527 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/5/2025 8:32:38 PM', Current time (UTC): '2/5/2025 8:32:51 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-05 15:32:51.528 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/5/2025 8:32:38 PM', Current time (UTC): '2/5/2025 8:32:51 PM'.
2025-02-05 15:32:51.531 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-02-05 15:32:51.542 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-02-05 15:32:51.542 -05:00 [INF] HTTP PUT /api/personas/Actualizar/11 responded 401 in 16.8349 ms
2025-02-05 15:32:51.542 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 401 null null 17.7187ms
2025-02-05 15:33:08.593 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - null null
2025-02-05 15:33:08.594 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:33:08.594 -05:00 [INF] HTTP OPTIONS /api/Control/ValidarToken responded 204 in 0.0910 ms
2025-02-05 15:33:08.594 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - 204 null null 0.6899ms
2025-02-05 15:33:08.597 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - null null
2025-02-05 15:33:08.597 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:33:08.598 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/5/2025 8:32:38 PM', Current time (UTC): '2/5/2025 8:33:08 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-05 15:33:08.599 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/5/2025 8:32:38 PM', Current time (UTC): '2/5/2025 8:33:08 PM'.
2025-02-05 15:33:08.599 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:33:08.600 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:33:08.600 -05:00 [INF] Validando token JWT.
2025-02-05 15:33:08.600 -05:00 [INF] Validando token JWT.
2025-02-05 15:33:08.751 -05:00 [ERR] Error al validar el token JWT.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/5/2025 8:32:38 PM', Current time (UTC): '2/5/2025 8:33:08 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at API_Secure.Custom.Utils.validarJWT(String token) in C:\Users\Developer\source\repos\API-Secure\Custom\Utils.cs:line 94
2025-02-05 15:33:08.753 -05:00 [WRN] Token inv谩lido.
2025-02-05 15:33:08.754 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:33:08.756 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 156.0009ms
2025-02-05 15:33:08.756 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:33:08.756 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 158.9096 ms
2025-02-05 15:33:08.756 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg3NTU4fQ.iqFZFdO1LL9LQymtzIIXbRqLYGFrB6-rE_XMuXhet4c - 200 null application/json; charset=utf-8 159.3871ms
2025-02-05 15:33:10.835 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/login - null null
2025-02-05 15:33:10.835 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:33:10.835 -05:00 [INF] HTTP OPTIONS /api/Control/login responded 204 in 0.0796 ms
2025-02-05 15:33:10.836 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/login - 204 null null 1.1708ms
2025-02-05 15:33:10.839 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5925/api/Control/login - application/json 43
2025-02-05 15:33:10.839 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:33:10.839 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/5/2025 8:32:38 PM', Current time (UTC): '2/5/2025 8:33:10 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-05 15:33:10.839 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/5/2025 8:32:38 PM', Current time (UTC): '2/5/2025 8:33:10 PM'.
2025-02-05 15:33:10.840 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.Login (API-Secure)'
2025-02-05 15:33:10.840 -05:00 [INF] Route matched with {action = "Login", controller = "Control"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(API_Secure.Models.DTO.Login) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:33:10.840 -05:00 [INF] Intentando iniciar sesi贸n con el usuario: PEDRO
2025-02-05 15:33:10.841 -05:00 [INF] Iniciando proceso de encriptaci贸n SHA256.
2025-02-05 15:33:10.841 -05:00 [INF] Encriptaci贸n exitosa.
2025-02-05 15:33:10.845 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__encriptarSHA256_0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Identificador], [u].[FechaCreacion], [u].[Pass], [u].[Usuario]
FROM [Usuario] AS [u]
WHERE [u].[Pass] = @__encriptarSHA256_0
2025-02-05 15:33:10.846 -05:00 [INF] Inicio de sesi贸n exitoso para el usuario: PEDRO
2025-02-05 15:33:10.846 -05:00 [INF] Generando JWT para el usuario: PEDRO
2025-02-05 15:33:10.879 -05:00 [INF] JWT generado exitosamente.
2025-02-05 15:33:10.880 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:33:10.883 -05:00 [INF] Executed action API_Secure.Controllers.Control.Login (API-Secure) in 43.0506ms
2025-02-05 15:33:10.883 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.Login (API-Secure)'
2025-02-05 15:33:10.883 -05:00 [INF] HTTP POST /api/Control/login responded 200 in 44.2099 ms
2025-02-05 15:33:10.883 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5925/api/Control/login - 200 null application/json; charset=utf-8 44.5285ms
2025-02-05 15:33:10.890 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg4MTkwfQ.le6SHuAGtb8xWplxq6zrDOrdO-zxWmR9sr5MxAAc7Kw - null null
2025-02-05 15:33:10.890 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:33:10.890 -05:00 [INF] HTTP OPTIONS /api/Control/ValidarToken responded 204 in 0.0406 ms
2025-02-05 15:33:10.891 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg4MTkwfQ.le6SHuAGtb8xWplxq6zrDOrdO-zxWmR9sr5MxAAc7Kw - 204 null null 0.3161ms
2025-02-05 15:33:10.893 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg4MTkwfQ.le6SHuAGtb8xWplxq6zrDOrdO-zxWmR9sr5MxAAc7Kw - null null
2025-02-05 15:33:10.893 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:33:10.894 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:33:10.894 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:33:10.894 -05:00 [INF] Validando token JWT.
2025-02-05 15:33:10.894 -05:00 [INF] Validando token JWT.
2025-02-05 15:33:10.895 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:33:10.895 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:33:10.895 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:33:10.895 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 1.5372ms
2025-02-05 15:33:10.895 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:33:10.895 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 2.3062 ms
2025-02-05 15:33:10.895 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg4MTkwfQ.le6SHuAGtb8xWplxq6zrDOrdO-zxWmR9sr5MxAAc7Kw - 200 null application/json; charset=utf-8 2.5587ms
2025-02-05 15:33:10.926 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:33:10.926 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:33:10.926 -05:00 [INF] HTTP OPTIONS /api/personas/Lista responded 204 in 0.0956 ms
2025-02-05 15:33:10.926 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - 204 null null 0.5483ms
2025-02-05 15:33:10.929 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:33:10.929 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:33:10.930 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:33:10.930 -05:00 [INF] Route matched with {action = "Lista", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Lista(Int32, Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:33:10.930 -05:00 [INF] Obteniendo lista de personas.
2025-02-05 15:33:10.936 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[p0='?' (DbType = Int32), p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC ConsultarPersonas @PageNumber = @p0, @PageSize = @p1
2025-02-05 15:33:10.937 -05:00 [INF] Lista de personas obtenida exitosamente.
2025-02-05 15:33:10.937 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[API_Secure.Models.Persona, API-Secure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-05 15:33:10.937 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Lista (API-Secure) in 7.6637ms
2025-02-05 15:33:10.937 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:33:10.938 -05:00 [INF] HTTP GET /api/personas/Lista responded 200 in 8.3122 ms
2025-02-05 15:33:10.938 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/personas/Lista - 200 null application/json; charset=utf-8 8.9142ms
2025-02-05 15:33:20.158 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - null null
2025-02-05 15:33:20.159 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:33:20.159 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/11 responded 204 in 0.0870 ms
2025-02-05 15:33:20.159 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - 204 null null 0.7479ms
2025-02-05 15:33:20.163 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 282
2025-02-05 15:33:20.164 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:33:20.164 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:33:20.164 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:33:20.165 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:33:20.173 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:33:20.180 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:33:20.187 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:33:20.260 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:33:20.262 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:33:20.262 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 98.2333ms
2025-02-05 15:33:20.262 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:33:20.263 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 98.9899 ms
2025-02-05 15:33:20.263 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 99.3839ms
2025-02-05 15:34:14.435 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - null null
2025-02-05 15:34:14.435 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:34:14.435 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/11 responded 204 in 0.0895 ms
2025-02-05 15:34:14.436 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - 204 null null 0.5962ms
2025-02-05 15:34:14.443 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 282
2025-02-05 15:34:14.443 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:34:14.443 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:34:14.443 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:34:14.444 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:34:14.457 -05:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:34:14.468 -05:00 [INF] Executed DbCommand (9ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:34:14.492 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:34:14.559 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa51502-9307-4aa2-a22c-e3fccdc21bd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:34:14.561 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:34:14.561 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 117.8974ms
2025-02-05 15:34:14.561 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:34:14.561 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 118.6888 ms
2025-02-05 15:34:14.562 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 119.129ms
2025-02-05 15:35:44.612 -05:00 [INF] User profile is available. Using 'C:\Users\Developer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-05 15:35:44.881 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/weatherforecast - null null
2025-02-05 15:35:45.017 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-05 15:35:45.020 -05:00 [INF] Hosting environment: Development
2025-02-05 15:35:45.021 -05:00 [INF] Content root path: C:\Users\Developer\source\repos\API-Secure
2025-02-05 15:35:45.225 -05:00 [INF] HTTP GET /weatherforecast responded 404 in 120.4729 ms
2025-02-05 15:35:45.255 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/weatherforecast - 404 null null 382.8382ms
2025-02-05 15:35:45.264 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5925/weatherforecast, Response status code: 404
2025-02-05 15:36:13.823 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg4MTkwfQ.le6SHuAGtb8xWplxq6zrDOrdO-zxWmR9sr5MxAAc7Kw - null null
2025-02-05 15:36:13.847 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:36:13.852 -05:00 [INF] HTTP OPTIONS /api/Control/ValidarToken responded 204 in 13.1822 ms
2025-02-05 15:36:13.855 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg4MTkwfQ.le6SHuAGtb8xWplxq6zrDOrdO-zxWmR9sr5MxAAc7Kw - 204 null null 33.3506ms
2025-02-05 15:36:13.880 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg4MTkwfQ.le6SHuAGtb8xWplxq6zrDOrdO-zxWmR9sr5MxAAc7Kw - null null
2025-02-05 15:36:13.885 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:36:13.983 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:36:14.018 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:36:14.205 -05:00 [INF] Validando token JWT.
2025-02-05 15:36:14.206 -05:00 [INF] Validando token JWT.
2025-02-05 15:36:14.223 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:36:14.223 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:36:14.229 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:36:14.242 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 220.2015ms
2025-02-05 15:36:14.242 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:36:14.242 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 358.1859 ms
2025-02-05 15:36:14.244 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg4MTkwfQ.le6SHuAGtb8xWplxq6zrDOrdO-zxWmR9sr5MxAAc7Kw - 200 null application/json; charset=utf-8 366.2544ms
2025-02-05 15:36:15.716 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:36:15.718 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:36:15.718 -05:00 [INF] HTTP OPTIONS /api/personas/Lista responded 204 in 0.6344 ms
2025-02-05 15:36:15.719 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - 204 null null 3.0798ms
2025-02-05 15:36:15.723 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:36:15.725 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:36:15.739 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:36:15.752 -05:00 [INF] Route matched with {action = "Lista", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Lista(Int32, Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:36:15.775 -05:00 [INF] Obteniendo lista de personas.
2025-02-05 15:36:16.967 -05:00 [INF] Executed DbCommand (50ms) [Parameters=[p0='?' (DbType = Int32), p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC ConsultarPersonas @PageNumber = @p0, @PageSize = @p1
2025-02-05 15:36:17.051 -05:00 [INF] Lista de personas obtenida exitosamente.
2025-02-05 15:36:17.053 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[API_Secure.Models.Persona, API-Secure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-05 15:36:17.063 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Lista (API-Secure) in 1310.0491ms
2025-02-05 15:36:17.063 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:36:17.065 -05:00 [INF] HTTP GET /api/personas/Lista responded 200 in 1340.0937 ms
2025-02-05 15:36:17.071 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/personas/Lista - 200 null application/json; charset=utf-8 1348.0804ms
2025-02-05 15:36:26.624 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - null null
2025-02-05 15:36:26.625 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:36:26.626 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/11 responded 204 in 1.9482 ms
2025-02-05 15:36:26.627 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - 204 null null 3.7855ms
2025-02-05 15:36:26.639 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 282
2025-02-05 15:36:26.641 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:36:26.646 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:36:26.653 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:36:26.696 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:36:26.849 -05:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:36:26.853 -05:00 [INF] request.
2025-02-05 15:36:26.940 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:36:26.978 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4091771b-8815-4e82-839f-3ac3bde7c5f4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4091771b-8815-4e82-839f-3ac3bde7c5f4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:36:27.083 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4091771b-8815-4e82-839f-3ac3bde7c5f4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:36:27.099 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:36:27.104 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 451.37ms
2025-02-05 15:36:27.104 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:36:27.105 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 463.9327 ms
2025-02-05 15:36:27.106 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 467.1042ms
2025-02-05 15:37:59.085 -05:00 [INF] User profile is available. Using 'C:\Users\Developer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-05 15:37:59.329 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/weatherforecast - null null
2025-02-05 15:37:59.455 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-05 15:37:59.456 -05:00 [INF] Hosting environment: Development
2025-02-05 15:37:59.456 -05:00 [INF] Content root path: C:\Users\Developer\source\repos\API-Secure
2025-02-05 15:37:59.570 -05:00 [INF] HTTP GET /weatherforecast responded 404 in 89.4668 ms
2025-02-05 15:37:59.595 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/weatherforecast - 404 null null 275.1529ms
2025-02-05 15:37:59.603 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5925/weatherforecast, Response status code: 404
2025-02-05 15:38:36.871 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - null null
2025-02-05 15:38:36.932 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:38:36.935 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/11 responded 204 in 14.7569 ms
2025-02-05 15:38:36.936 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/11 - 204 null null 66.0391ms
2025-02-05 15:38:36.943 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - application/json 282
2025-02-05 15:38:36.946 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:38:37.017 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:38:37.048 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:38:37.253 -05:00 [INF] Actualizando persona con ID: 11
2025-02-05 15:38:38.459 -05:00 [INF] Executed DbCommand (53ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:38:38.535 -05:00 [INF] request.
2025-02-05 15:38:38.641 -05:00 [INF] Executed DbCommand (14ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:38:38.682 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:030735ce-c747-49ef-98b5-543a403ce0ff
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:030735ce-c747-49ef-98b5-543a403ce0ff
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:38:38.800 -05:00 [ERR] Error al actualizar persona con ID 11.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the CHECK constraint "CK__Personas__TipoId__398D8EEE". The conflict occurred in database "SecureDB", table "dbo.Personas", column 'TipoIdentificacion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:030735ce-c747-49ef-98b5-543a403ce0ff
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.PersonasController.Actualizar(Int32 id, Persona request) in C:\Users\Developer\source\repos\API-Secure\Controllers\PersonaController.cs:line 117
2025-02-05 15:38:38.826 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-02-05 15:38:38.836 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 1784.677ms
2025-02-05 15:38:38.837 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:38:38.838 -05:00 [ERR] HTTP PUT /api/personas/Actualizar/11 responded 500 in 1893.2590 ms
2025-02-05 15:38:38.848 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/11 - 500 null text/plain; charset=utf-8 1905.8907ms
2025-02-05 15:42:43.171 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/2 - null null
2025-02-05 15:42:43.172 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:42:43.172 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/2 responded 204 in 0.8432 ms
2025-02-05 15:42:43.173 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/2 - 204 null null 2.3033ms
2025-02-05 15:42:43.175 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/2 - application/json 282
2025-02-05 15:42:43.176 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:42:43.185 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:42:43.190 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:42:43.195 -05:00 [INF] Actualizando persona con ID: 2
2025-02-05 15:42:43.236 -05:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:42:43.237 -05:00 [INF] request.
2025-02-05 15:42:43.242 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:42:43.258 -05:00 [INF] Persona con ID 2 actualizada exitosamente.
2025-02-05 15:42:43.259 -05:00 [INF] Executing OkObjectResult, writing value of type 'API_Secure.Models.Persona'.
2025-02-05 15:42:43.266 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 75.499ms
2025-02-05 15:42:43.266 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:42:43.267 -05:00 [INF] HTTP PUT /api/personas/Actualizar/2 responded 200 in 91.0128 ms
2025-02-05 15:42:43.267 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/2 - 200 null application/json; charset=utf-8 91.903ms
2025-02-05 15:42:49.059 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/2 - null null
2025-02-05 15:42:49.060 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:42:49.060 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/2 responded 204 in 0.2801 ms
2025-02-05 15:42:49.060 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/2 - 204 null null 1.3094ms
2025-02-05 15:42:49.063 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/2 - application/json 289
2025-02-05 15:42:49.063 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:42:49.064 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:42:49.064 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:42:49.067 -05:00 [INF] Actualizando persona con ID: 2
2025-02-05 15:42:49.136 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:42:49.141 -05:00 [INF] request.
2025-02-05 15:42:49.146 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:42:49.147 -05:00 [INF] Persona con ID 2 actualizada exitosamente.
2025-02-05 15:42:49.147 -05:00 [INF] Executing OkObjectResult, writing value of type 'API_Secure.Models.Persona'.
2025-02-05 15:42:49.148 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 83.2643ms
2025-02-05 15:42:49.148 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:42:49.148 -05:00 [INF] HTTP PUT /api/personas/Actualizar/2 responded 200 in 85.0230 ms
2025-02-05 15:42:49.148 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/2 - 200 null application/json; charset=utf-8 85.5097ms
2025-02-05 15:45:26.627 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg4MTkwfQ.le6SHuAGtb8xWplxq6zrDOrdO-zxWmR9sr5MxAAc7Kw - null null
2025-02-05 15:45:26.628 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:45:26.629 -05:00 [INF] HTTP OPTIONS /api/Control/ValidarToken responded 204 in 0.3418 ms
2025-02-05 15:45:26.631 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg4MTkwfQ.le6SHuAGtb8xWplxq6zrDOrdO-zxWmR9sr5MxAAc7Kw - 204 null null 4.7238ms
2025-02-05 15:45:26.637 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg4MTkwfQ.le6SHuAGtb8xWplxq6zrDOrdO-zxWmR9sr5MxAAc7Kw - null null
2025-02-05 15:45:26.641 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:45:26.645 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/5/2025 8:43:10 PM', Current time (UTC): '2/5/2025 8:45:26 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-05 15:45:26.648 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/5/2025 8:43:10 PM', Current time (UTC): '2/5/2025 8:45:26 PM'.
2025-02-05 15:45:26.648 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:45:26.651 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:45:26.660 -05:00 [INF] Validando token JWT.
2025-02-05 15:45:26.661 -05:00 [INF] Validando token JWT.
2025-02-05 15:45:26.830 -05:00 [ERR] Error al validar el token JWT.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/5/2025 8:43:10 PM', Current time (UTC): '2/5/2025 8:45:26 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at API_Secure.Custom.Utils.validarJWT(String token) in C:\Users\Developer\source\repos\API-Secure\Custom\Utils.cs:line 94
2025-02-05 15:45:26.831 -05:00 [WRN] Token inv谩lido.
2025-02-05 15:45:26.832 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:45:26.837 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 185.3638ms
2025-02-05 15:45:26.837 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:45:26.837 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 196.1481 ms
2025-02-05 15:45:26.837 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg4MTkwfQ.le6SHuAGtb8xWplxq6zrDOrdO-zxWmR9sr5MxAAc7Kw - 200 null application/json; charset=utf-8 201.8972ms
2025-02-05 15:46:35.530 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/Registrarse - null null
2025-02-05 15:46:35.530 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:46:35.557 -05:00 [INF] HTTP OPTIONS /api/Control/Registrarse responded 204 in 27.3629 ms
2025-02-05 15:46:35.558 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/Registrarse - 204 null null 33.0391ms
2025-02-05 15:46:35.565 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5925/api/Control/Registrarse - application/json 43
2025-02-05 15:46:35.566 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:46:35.567 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/5/2025 8:43:10 PM', Current time (UTC): '2/5/2025 8:46:35 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-05 15:46:35.567 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/5/2025 8:43:10 PM', Current time (UTC): '2/5/2025 8:46:35 PM'.
2025-02-05 15:46:35.568 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.Registrarse (API-Secure)'
2025-02-05 15:46:35.571 -05:00 [INF] Route matched with {action = "Registrarse", controller = "Control"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Registrarse(API_Secure.Models.DTO.UsuarioRegistro) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:46:35.575 -05:00 [INF] Inicio de registro de usuario: PEDRO
2025-02-05 15:46:35.575 -05:00 [INF] Iniciando proceso de encriptaci贸n SHA256.
2025-02-05 15:46:35.576 -05:00 [INF] Encriptaci贸n exitosa.
2025-02-05 15:46:35.635 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 128), @p1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Usuario] ([Pass], [Usuario])
OUTPUT INSERTED.[Identificador], INSERTED.[FechaCreacion]
VALUES (@p0, @p1);
2025-02-05 15:46:35.639 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'API_Secure.Models.SecureDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of UNIQUE KEY constraint 'UQ__Usuario__E3237CF7232330BE'. Cannot insert duplicate key in object 'dbo.Usuario'. The duplicate key value is (PEDRO).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:030735ce-c747-49ef-98b5-543a403ce0ff
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of UNIQUE KEY constraint 'UQ__Usuario__E3237CF7232330BE'. Cannot insert duplicate key in object 'dbo.Usuario'. The duplicate key value is (PEDRO).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:030735ce-c747-49ef-98b5-543a403ce0ff
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-05 15:46:35.706 -05:00 [ERR] Error al registrar usuario: PEDRO
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of UNIQUE KEY constraint 'UQ__Usuario__E3237CF7232330BE'. Cannot insert duplicate key in object 'dbo.Usuario'. The duplicate key value is (PEDRO).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:030735ce-c747-49ef-98b5-543a403ce0ff
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at API_Secure.Controllers.Control.Registrarse(UsuarioRegistro objeto) in C:\Users\Developer\source\repos\API-Secure\Controllers\Control.cs:line 42
2025-02-05 15:46:35.708 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType1`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:46:35.712 -05:00 [INF] Executed action API_Secure.Controllers.Control.Registrarse (API-Secure) in 140.0137ms
2025-02-05 15:46:35.712 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.Registrarse (API-Secure)'
2025-02-05 15:46:35.712 -05:00 [ERR] HTTP POST /api/Control/Registrarse responded 500 in 146.0802 ms
2025-02-05 15:46:35.712 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5925/api/Control/Registrarse - 500 null application/json; charset=utf-8 146.656ms
2025-02-05 15:46:43.054 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/login - null null
2025-02-05 15:46:43.054 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:46:43.054 -05:00 [INF] HTTP OPTIONS /api/Control/login responded 204 in 0.2343 ms
2025-02-05 15:46:43.054 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/login - 204 null null 0.7569ms
2025-02-05 15:46:43.056 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5925/api/Control/login - application/json 43
2025-02-05 15:46:43.056 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:46:43.057 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/5/2025 8:43:10 PM', Current time (UTC): '2/5/2025 8:46:43 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-05 15:46:43.057 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/5/2025 8:43:10 PM', Current time (UTC): '2/5/2025 8:46:43 PM'.
2025-02-05 15:46:43.057 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.Login (API-Secure)'
2025-02-05 15:46:43.061 -05:00 [INF] Route matched with {action = "Login", controller = "Control"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(API_Secure.Models.DTO.Login) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:46:43.065 -05:00 [INF] Intentando iniciar sesi贸n con el usuario: PEDRO
2025-02-05 15:46:43.069 -05:00 [INF] Iniciando proceso de encriptaci贸n SHA256.
2025-02-05 15:46:43.069 -05:00 [INF] Encriptaci贸n exitosa.
2025-02-05 15:46:43.088 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__encriptarSHA256_0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Identificador], [u].[FechaCreacion], [u].[Pass], [u].[Usuario]
FROM [Usuario] AS [u]
WHERE [u].[Pass] = @__encriptarSHA256_0
2025-02-05 15:46:43.092 -05:00 [INF] Inicio de sesi贸n exitoso para el usuario: PEDRO
2025-02-05 15:46:43.095 -05:00 [INF] Generando JWT para el usuario: PEDRO
2025-02-05 15:46:43.102 -05:00 [INF] JWT generado exitosamente.
2025-02-05 15:46:43.102 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:46:43.104 -05:00 [INF] Executed action API_Secure.Controllers.Control.Login (API-Secure) in 42.396ms
2025-02-05 15:46:43.104 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.Login (API-Secure)'
2025-02-05 15:46:43.104 -05:00 [INF] HTTP POST /api/Control/login responded 200 in 47.8786 ms
2025-02-05 15:46:43.104 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5925/api/Control/login - 200 null application/json; charset=utf-8 48.2858ms
2025-02-05 15:46:43.115 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg5MDAzfQ.UDthd56NgBdUXwRT34mEXbxjW4e7Xa9A_PT-cM1F68E - null null
2025-02-05 15:46:43.116 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:46:43.116 -05:00 [INF] HTTP OPTIONS /api/Control/ValidarToken responded 204 in 0.0888 ms
2025-02-05 15:46:43.116 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg5MDAzfQ.UDthd56NgBdUXwRT34mEXbxjW4e7Xa9A_PT-cM1F68E - 204 null null 0.4967ms
2025-02-05 15:46:43.121 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg5MDAzfQ.UDthd56NgBdUXwRT34mEXbxjW4e7Xa9A_PT-cM1F68E - null null
2025-02-05 15:46:43.122 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:46:43.122 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:46:43.122 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:46:43.123 -05:00 [INF] Validando token JWT.
2025-02-05 15:46:43.123 -05:00 [INF] Validando token JWT.
2025-02-05 15:46:43.126 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:46:43.126 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:46:43.126 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:46:43.127 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 4.9237ms
2025-02-05 15:46:43.127 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:46:43.127 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 5.6273 ms
2025-02-05 15:46:43.128 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg5MDAzfQ.UDthd56NgBdUXwRT34mEXbxjW4e7Xa9A_PT-cM1F68E - 200 null application/json; charset=utf-8 6.2403ms
2025-02-05 15:46:43.163 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:46:43.163 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:46:43.163 -05:00 [INF] HTTP OPTIONS /api/personas/Lista responded 204 in 0.1463 ms
2025-02-05 15:46:43.164 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - 204 null null 0.8806ms
2025-02-05 15:46:43.167 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:46:43.168 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:46:43.169 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:46:43.173 -05:00 [INF] Route matched with {action = "Lista", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Lista(Int32, Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:46:43.175 -05:00 [INF] Obteniendo lista de personas.
2025-02-05 15:46:43.207 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Int32), p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC ConsultarPersonas @PageNumber = @p0, @PageSize = @p1
2025-02-05 15:46:43.213 -05:00 [INF] Lista de personas obtenida exitosamente.
2025-02-05 15:46:43.213 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[API_Secure.Models.Persona, API-Secure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-05 15:46:43.214 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Lista (API-Secure) in 40.6977ms
2025-02-05 15:46:43.214 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:46:43.214 -05:00 [INF] HTTP GET /api/personas/Lista responded 200 in 46.6674 ms
2025-02-05 15:46:43.214 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/personas/Lista - 200 null application/json; charset=utf-8 47.2545ms
2025-02-05 15:47:39.197 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Agregar - null null
2025-02-05 15:47:39.198 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:47:39.199 -05:00 [INF] HTTP OPTIONS /api/personas/Agregar responded 204 in 0.8235 ms
2025-02-05 15:47:39.199 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Agregar - 204 null null 2.2419ms
2025-02-05 15:47:39.201 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5925/api/personas/Agregar - application/json 149
2025-02-05 15:47:39.201 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:47:39.202 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Agregar (API-Secure)'
2025-02-05 15:47:39.205 -05:00 [INF] Route matched with {action = "Agregar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Agregar(API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:47:39.228 -05:00 [INF] Agregando nueva persona.
2025-02-05 15:47:39.254 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (Size = 100), @p3='?' (Size = 20), @p4='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Personas] ([Apellidos], [Email], [Nombres], [NumeroIdentificacion], [TipoIdentificacion])
OUTPUT INSERTED.[Identificador], INSERTED.[FechaCreacion], INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-02-05 15:47:39.264 -05:00 [INF] Persona agregada exitosamente.
2025-02-05 15:47:39.264 -05:00 [INF] Executing OkObjectResult, writing value of type 'API_Secure.Models.Persona'.
2025-02-05 15:47:39.265 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Agregar (API-Secure) in 59.3059ms
2025-02-05 15:47:39.265 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Agregar (API-Secure)'
2025-02-05 15:47:39.265 -05:00 [INF] HTTP POST /api/personas/Agregar responded 200 in 63.3726 ms
2025-02-05 15:47:39.265 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5925/api/personas/Agregar - 200 null application/json; charset=utf-8 64.0431ms
2025-02-05 15:47:51.612 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Agregar - null null
2025-02-05 15:47:51.612 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:47:51.612 -05:00 [INF] HTTP OPTIONS /api/personas/Agregar responded 204 in 0.1178 ms
2025-02-05 15:47:51.612 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Agregar - 204 null null 0.6192ms
2025-02-05 15:47:51.614 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5925/api/personas/Agregar - application/json 136
2025-02-05 15:47:51.615 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:47:51.615 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Agregar (API-Secure)'
2025-02-05 15:47:51.615 -05:00 [INF] Route matched with {action = "Agregar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Agregar(API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:47:51.616 -05:00 [INF] Agregando nueva persona.
2025-02-05 15:47:51.617 -05:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-02-05 15:47:51.618 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Agregar (API-Secure) in 2.1369ms
2025-02-05 15:47:51.618 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Agregar (API-Secure)'
2025-02-05 15:47:51.618 -05:00 [INF] HTTP POST /api/personas/Agregar responded 400 in 3.3626 ms
2025-02-05 15:47:51.618 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5925/api/personas/Agregar - 400 null text/plain; charset=utf-8 4.0338ms
2025-02-05 15:48:05.061 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/2 - null null
2025-02-05 15:48:05.061 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:48:05.061 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/2 responded 204 in 0.1150 ms
2025-02-05 15:48:05.061 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/2 - 204 null null 0.5759ms
2025-02-05 15:48:05.063 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/2 - application/json 291
2025-02-05 15:48:05.063 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:48:05.064 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:48:05.064 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:48:05.064 -05:00 [INF] Actualizando persona con ID: 2
2025-02-05 15:48:05.070 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:48:05.070 -05:00 [INF] request.
2025-02-05 15:48:05.080 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:48:05.081 -05:00 [INF] Persona con ID 2 actualizada exitosamente.
2025-02-05 15:48:05.081 -05:00 [INF] Executing OkObjectResult, writing value of type 'API_Secure.Models.Persona'.
2025-02-05 15:48:05.082 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 18.0325ms
2025-02-05 15:48:05.082 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:48:05.082 -05:00 [INF] HTTP PUT /api/personas/Actualizar/2 responded 200 in 18.7979 ms
2025-02-05 15:48:05.083 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/2 - 200 null application/json; charset=utf-8 19.3699ms
2025-02-05 15:48:16.451 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Eliminar/2 - null null
2025-02-05 15:48:16.451 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:48:16.452 -05:00 [INF] HTTP OPTIONS /api/personas/Eliminar/2 responded 204 in 0.5354 ms
2025-02-05 15:48:16.452 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Eliminar/2 - 204 null null 1.0721ms
2025-02-05 15:48:16.454 -05:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5925/api/personas/Eliminar/2 - null null
2025-02-05 15:48:16.454 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:48:16.455 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Eliminar (API-Secure)'
2025-02-05 15:48:16.458 -05:00 [INF] Route matched with {action = "Eliminar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Eliminar(Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:48:16.459 -05:00 [INF] Eliminando persona con ID: 2
2025-02-05 15:48:16.463 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:48:16.479 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Personas]
OUTPUT 1
WHERE [Identificador] = @p0;
2025-02-05 15:48:16.483 -05:00 [INF] Persona con ID 2 eliminada exitosamente.
2025-02-05 15:48:16.486 -05:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-02-05 15:48:16.486 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Eliminar (API-Secure) in 28.2953ms
2025-02-05 15:48:16.486 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Eliminar (API-Secure)'
2025-02-05 15:48:16.486 -05:00 [INF] HTTP DELETE /api/personas/Eliminar/2 responded 200 in 32.1419 ms
2025-02-05 15:48:16.487 -05:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5925/api/personas/Eliminar/2 - 200 null null 32.8624ms
2025-02-05 15:48:17.251 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Eliminar/11 - null null
2025-02-05 15:48:17.251 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:48:17.251 -05:00 [INF] HTTP OPTIONS /api/personas/Eliminar/11 responded 204 in 0.1415 ms
2025-02-05 15:48:17.251 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Eliminar/11 - 204 null null 0.4973ms
2025-02-05 15:48:17.253 -05:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5925/api/personas/Eliminar/11 - null null
2025-02-05 15:48:17.253 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:48:17.254 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Eliminar (API-Secure)'
2025-02-05 15:48:17.254 -05:00 [INF] Route matched with {action = "Eliminar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Eliminar(Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:48:17.255 -05:00 [INF] Eliminando persona con ID: 11
2025-02-05 15:48:17.258 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:48:17.261 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Personas]
OUTPUT 1
WHERE [Identificador] = @p0;
2025-02-05 15:48:17.262 -05:00 [INF] Persona con ID 11 eliminada exitosamente.
2025-02-05 15:48:17.262 -05:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-02-05 15:48:17.262 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Eliminar (API-Secure) in 8.1107ms
2025-02-05 15:48:17.262 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Eliminar (API-Secure)'
2025-02-05 15:48:17.262 -05:00 [INF] HTTP DELETE /api/personas/Eliminar/11 responded 200 in 9.0978 ms
2025-02-05 15:48:17.263 -05:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5925/api/personas/Eliminar/11 - 200 null null 9.8215ms
2025-02-05 15:48:18.404 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Eliminar/19 - null null
2025-02-05 15:48:18.404 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:48:18.404 -05:00 [INF] HTTP OPTIONS /api/personas/Eliminar/19 responded 204 in 0.0858 ms
2025-02-05 15:48:18.404 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Eliminar/19 - 204 null null 0.3634ms
2025-02-05 15:48:18.406 -05:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5925/api/personas/Eliminar/19 - null null
2025-02-05 15:48:18.406 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:48:18.407 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Eliminar (API-Secure)'
2025-02-05 15:48:18.407 -05:00 [INF] Route matched with {action = "Eliminar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Eliminar(Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:48:18.408 -05:00 [INF] Eliminando persona con ID: 19
2025-02-05 15:48:18.412 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:48:18.415 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Personas]
OUTPUT 1
WHERE [Identificador] = @p0;
2025-02-05 15:48:18.415 -05:00 [INF] Persona con ID 19 eliminada exitosamente.
2025-02-05 15:48:18.415 -05:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-02-05 15:48:18.415 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Eliminar (API-Secure) in 8.1503ms
2025-02-05 15:48:18.415 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Eliminar (API-Secure)'
2025-02-05 15:48:18.415 -05:00 [INF] HTTP DELETE /api/personas/Eliminar/19 responded 200 in 9.4559 ms
2025-02-05 15:48:18.416 -05:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5925/api/personas/Eliminar/19 - 200 null null 10.1371ms
2025-02-05 15:49:23.584 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Agregar - null null
2025-02-05 15:49:23.584 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:49:23.584 -05:00 [INF] HTTP OPTIONS /api/personas/Agregar responded 204 in 0.1516 ms
2025-02-05 15:49:23.584 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Agregar - 204 null null 0.7558ms
2025-02-05 15:49:23.586 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5925/api/personas/Agregar - application/json 162
2025-02-05 15:49:23.587 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:49:23.587 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Agregar (API-Secure)'
2025-02-05 15:49:23.587 -05:00 [INF] Route matched with {action = "Agregar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Agregar(API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:49:23.588 -05:00 [INF] Agregando nueva persona.
2025-02-05 15:49:23.606 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (Size = 100), @p3='?' (Size = 20), @p4='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Personas] ([Apellidos], [Email], [Nombres], [NumeroIdentificacion], [TipoIdentificacion])
OUTPUT INSERTED.[Identificador], INSERTED.[FechaCreacion], INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-02-05 15:49:23.608 -05:00 [INF] Persona agregada exitosamente.
2025-02-05 15:49:23.608 -05:00 [INF] Executing OkObjectResult, writing value of type 'API_Secure.Models.Persona'.
2025-02-05 15:49:23.610 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Agregar (API-Secure) in 22.9316ms
2025-02-05 15:49:23.610 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Agregar (API-Secure)'
2025-02-05 15:49:23.611 -05:00 [INF] HTTP POST /api/personas/Agregar responded 200 in 24.0629 ms
2025-02-05 15:49:23.611 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5925/api/personas/Agregar - 200 null application/json; charset=utf-8 24.9782ms
2025-02-05 15:49:47.279 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg5MDAzfQ.UDthd56NgBdUXwRT34mEXbxjW4e7Xa9A_PT-cM1F68E - null null
2025-02-05 15:49:47.280 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:49:47.280 -05:00 [INF] HTTP OPTIONS /api/Control/ValidarToken responded 204 in 0.1305 ms
2025-02-05 15:49:47.280 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg5MDAzfQ.UDthd56NgBdUXwRT34mEXbxjW4e7Xa9A_PT-cM1F68E - 204 null null 0.7624ms
2025-02-05 15:49:47.282 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg5MDAzfQ.UDthd56NgBdUXwRT34mEXbxjW4e7Xa9A_PT-cM1F68E - null null
2025-02-05 15:49:47.283 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:49:47.284 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:49:47.284 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:49:47.285 -05:00 [INF] Validando token JWT.
2025-02-05 15:49:47.285 -05:00 [INF] Validando token JWT.
2025-02-05 15:49:47.285 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:49:47.285 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:49:47.285 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:49:47.286 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 2.1912ms
2025-02-05 15:49:47.286 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:49:47.286 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 3.8411 ms
2025-02-05 15:49:47.287 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg5MDAzfQ.UDthd56NgBdUXwRT34mEXbxjW4e7Xa9A_PT-cM1F68E - 200 null application/json; charset=utf-8 4.3777ms
2025-02-05 15:49:47.407 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:49:47.407 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:49:47.407 -05:00 [INF] HTTP OPTIONS /api/personas/Lista responded 204 in 0.0965 ms
2025-02-05 15:49:47.409 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - 204 null null 2.0103ms
2025-02-05 15:49:47.412 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:49:47.412 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:49:47.413 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:49:47.413 -05:00 [INF] Route matched with {action = "Lista", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Lista(Int32, Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:49:47.414 -05:00 [INF] Obteniendo lista de personas.
2025-02-05 15:49:47.425 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[p0='?' (DbType = Int32), p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC ConsultarPersonas @PageNumber = @p0, @PageSize = @p1
2025-02-05 15:49:47.430 -05:00 [INF] Lista de personas obtenida exitosamente.
2025-02-05 15:49:47.430 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[API_Secure.Models.Persona, API-Secure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-05 15:49:47.435 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Lista (API-Secure) in 21.6261ms
2025-02-05 15:49:47.435 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:49:47.435 -05:00 [INF] HTTP GET /api/personas/Lista responded 200 in 22.8295 ms
2025-02-05 15:49:47.435 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/personas/Lista - 200 null application/json; charset=utf-8 23.3503ms
2025-02-05 15:49:59.084 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg5MDAzfQ.UDthd56NgBdUXwRT34mEXbxjW4e7Xa9A_PT-cM1F68E - null null
2025-02-05 15:49:59.084 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:49:59.084 -05:00 [INF] HTTP OPTIONS /api/Control/ValidarToken responded 204 in 0.1496 ms
2025-02-05 15:49:59.085 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg5MDAzfQ.UDthd56NgBdUXwRT34mEXbxjW4e7Xa9A_PT-cM1F68E - 204 null null 0.9819ms
2025-02-05 15:49:59.087 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg5MDAzfQ.UDthd56NgBdUXwRT34mEXbxjW4e7Xa9A_PT-cM1F68E - null null
2025-02-05 15:49:59.087 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:49:59.087 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:49:59.088 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:49:59.088 -05:00 [INF] Validando token JWT.
2025-02-05 15:49:59.088 -05:00 [INF] Validando token JWT.
2025-02-05 15:49:59.089 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:49:59.089 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:49:59.089 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:49:59.090 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 2.2437ms
2025-02-05 15:49:59.090 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:49:59.090 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 3.1680 ms
2025-02-05 15:49:59.090 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg5MDAzfQ.UDthd56NgBdUXwRT34mEXbxjW4e7Xa9A_PT-cM1F68E - 200 null application/json; charset=utf-8 3.6863ms
2025-02-05 15:49:59.137 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:49:59.137 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:49:59.137 -05:00 [INF] HTTP OPTIONS /api/personas/Lista responded 204 in 0.3388 ms
2025-02-05 15:49:59.138 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - 204 null null 1.3801ms
2025-02-05 15:49:59.140 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:49:59.140 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:49:59.141 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:49:59.141 -05:00 [INF] Route matched with {action = "Lista", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Lista(Int32, Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:49:59.141 -05:00 [INF] Obteniendo lista de personas.
2025-02-05 15:49:59.149 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[p0='?' (DbType = Int32), p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC ConsultarPersonas @PageNumber = @p0, @PageSize = @p1
2025-02-05 15:49:59.150 -05:00 [INF] Lista de personas obtenida exitosamente.
2025-02-05 15:49:59.150 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[API_Secure.Models.Persona, API-Secure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-05 15:49:59.158 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Lista (API-Secure) in 16.706ms
2025-02-05 15:49:59.158 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:49:59.158 -05:00 [INF] HTTP GET /api/personas/Lista responded 200 in 17.8902 ms
2025-02-05 15:49:59.159 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/personas/Lista - 200 null application/json; charset=utf-8 18.4412ms
2025-02-05 15:52:19.790 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/20 - null null
2025-02-05 15:52:19.790 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:52:19.790 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/20 responded 204 in 0.2586 ms
2025-02-05 15:52:19.791 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/20 - 204 null null 0.7236ms
2025-02-05 15:52:19.795 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/20 - application/json 307
2025-02-05 15:52:19.795 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:52:19.796 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:52:19.796 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:52:19.798 -05:00 [INF] Actualizando persona con ID: 20
2025-02-05 15:52:19.811 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:52:19.815 -05:00 [INF] request.
2025-02-05 15:52:19.826 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:52:19.826 -05:00 [INF] Persona con ID 20 actualizada exitosamente.
2025-02-05 15:52:19.826 -05:00 [INF] Executing OkObjectResult, writing value of type 'API_Secure.Models.Persona'.
2025-02-05 15:52:19.827 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 30.0259ms
2025-02-05 15:52:19.827 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:52:19.827 -05:00 [INF] HTTP PUT /api/personas/Actualizar/20 responded 200 in 31.9858 ms
2025-02-05 15:52:19.828 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/20 - 200 null application/json; charset=utf-8 32.8212ms
2025-02-05 15:52:27.510 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/20 - null null
2025-02-05 15:52:27.510 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:52:27.510 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/20 responded 204 in 0.2030 ms
2025-02-05 15:52:27.511 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/20 - 204 null null 0.8977ms
2025-02-05 15:52:27.513 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/20 - application/json 303
2025-02-05 15:52:27.513 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:52:27.514 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:52:27.514 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:52:27.514 -05:00 [INF] Actualizando persona con ID: 20
2025-02-05 15:52:27.521 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 15:52:27.525 -05:00 [INF] request.
2025-02-05 15:52:27.537 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 15:52:27.539 -05:00 [INF] Persona con ID 20 actualizada exitosamente.
2025-02-05 15:52:27.539 -05:00 [INF] Executing OkObjectResult, writing value of type 'API_Secure.Models.Persona'.
2025-02-05 15:52:27.540 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 26.2571ms
2025-02-05 15:52:27.540 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 15:52:27.540 -05:00 [INF] HTTP PUT /api/personas/Actualizar/20 responded 200 in 27.1651 ms
2025-02-05 15:52:27.541 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/20 - 200 null application/json; charset=utf-8 27.7613ms
2025-02-05 15:52:48.054 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg5MDAzfQ.UDthd56NgBdUXwRT34mEXbxjW4e7Xa9A_PT-cM1F68E - null null
2025-02-05 15:52:48.055 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:52:48.055 -05:00 [INF] HTTP OPTIONS /api/Control/ValidarToken responded 204 in 0.4438 ms
2025-02-05 15:52:48.056 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg5MDAzfQ.UDthd56NgBdUXwRT34mEXbxjW4e7Xa9A_PT-cM1F68E - 204 null null 1.4183ms
2025-02-05 15:52:48.058 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg5MDAzfQ.UDthd56NgBdUXwRT34mEXbxjW4e7Xa9A_PT-cM1F68E - null null
2025-02-05 15:52:48.059 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:52:48.059 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:52:48.059 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 15:52:48.060 -05:00 [INF] Validando token JWT.
2025-02-05 15:52:48.060 -05:00 [INF] Validando token JWT.
2025-02-05 15:52:48.060 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:52:48.060 -05:00 [INF] Token validado exitosamente.
2025-02-05 15:52:48.060 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 15:52:48.061 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 1.2579ms
2025-02-05 15:52:48.061 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 15:52:48.061 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 1.9627 ms
2025-02-05 15:52:48.061 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4Nzg5MDAzfQ.UDthd56NgBdUXwRT34mEXbxjW4e7Xa9A_PT-cM1F68E - 200 null application/json; charset=utf-8 2.2939ms
2025-02-05 15:52:48.098 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:52:48.098 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:52:48.098 -05:00 [INF] HTTP OPTIONS /api/personas/Lista responded 204 in 0.0933 ms
2025-02-05 15:52:48.099 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - 204 null null 1.4168ms
2025-02-05 15:52:48.109 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/personas/Lista - null null
2025-02-05 15:52:48.109 -05:00 [INF] CORS policy execution successful.
2025-02-05 15:52:48.110 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:52:48.110 -05:00 [INF] Route matched with {action = "Lista", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Lista(Int32, Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 15:52:48.111 -05:00 [INF] Obteniendo lista de personas.
2025-02-05 15:52:48.118 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Int32), p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC ConsultarPersonas @PageNumber = @p0, @PageSize = @p1
2025-02-05 15:52:48.119 -05:00 [INF] Lista de personas obtenida exitosamente.
2025-02-05 15:52:48.119 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[API_Secure.Models.Persona, API-Secure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-05 15:52:48.120 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Lista (API-Secure) in 10.4206ms
2025-02-05 15:52:48.121 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 15:52:48.121 -05:00 [INF] HTTP GET /api/personas/Lista responded 200 in 11.6087 ms
2025-02-05 15:52:48.122 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/personas/Lista - 200 null application/json; charset=utf-8 12.6287ms
2025-02-05 16:09:33.439 -05:00 [INF] User profile is available. Using 'C:\Users\Developer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-05 16:09:33.766 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/weatherforecast - null null
2025-02-05 16:09:33.932 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-05 16:09:33.933 -05:00 [INF] Hosting environment: Development
2025-02-05 16:09:33.933 -05:00 [INF] Content root path: C:\Users\Developer\source\repos\API-Secure
2025-02-05 16:09:34.052 -05:00 [INF] HTTP GET /weatherforecast responded 404 in 102.4044 ms
2025-02-05 16:09:34.082 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/weatherforecast - 404 null null 325.908ms
2025-02-05 16:09:34.090 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5925/weatherforecast, Response status code: 404
2025-02-05 16:09:38.133 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/login - null null
2025-02-05 16:09:38.141 -05:00 [INF] CORS policy execution successful.
2025-02-05 16:09:38.143 -05:00 [INF] HTTP OPTIONS /api/Control/login responded 204 in 6.8070 ms
2025-02-05 16:09:38.146 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/login - 204 null null 13.958ms
2025-02-05 16:09:38.154 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5925/api/Control/login - application/json 43
2025-02-05 16:09:38.157 -05:00 [INF] CORS policy execution successful.
2025-02-05 16:09:38.230 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/5/2025 8:56:43 PM', Current time (UTC): '2/5/2025 9:09:38 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-05 16:09:38.264 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/5/2025 8:56:43 PM', Current time (UTC): '2/5/2025 9:09:38 PM'.
2025-02-05 16:09:38.266 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.Login (API-Secure)'
2025-02-05 16:09:38.298 -05:00 [INF] Route matched with {action = "Login", controller = "Control"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(API_Secure.Models.DTO.Login) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 16:09:38.527 -05:00 [INF] Intentando iniciar sesi贸n con el usuario: PEDRO
2025-02-05 16:09:39.117 -05:00 [INF] Iniciando proceso de encriptaci贸n SHA256.
2025-02-05 16:09:39.117 -05:00 [INF] Encriptaci贸n exitosa.
2025-02-05 16:09:40.060 -05:00 [INF] Executed DbCommand (94ms) [Parameters=[@__encriptarSHA256_0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Identificador], [u].[FechaCreacion], [u].[Pass], [u].[Usuario]
FROM [Usuario] AS [u]
WHERE [u].[Pass] = @__encriptarSHA256_0
2025-02-05 16:09:40.150 -05:00 [INF] Inicio de sesi贸n exitoso para el usuario: PEDRO
2025-02-05 16:09:40.151 -05:00 [INF] Generando JWT para el usuario: PEDRO
2025-02-05 16:09:40.163 -05:00 [INF] JWT generado exitosamente.
2025-02-05 16:09:40.169 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 16:09:40.195 -05:00 [INF] Executed action API_Secure.Controllers.Control.Login (API-Secure) in 1885.503ms
2025-02-05 16:09:40.196 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.Login (API-Secure)'
2025-02-05 16:09:40.202 -05:00 [INF] HTTP POST /api/Control/login responded 200 in 2045.0016 ms
2025-02-05 16:09:40.236 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4NzkwMzgwfQ.ukk1jd3TSx_n4fSZW9l_DcJ3EAKg1KxqEp0GY1UfmBg - null null
2025-02-05 16:09:40.237 -05:00 [INF] CORS policy execution successful.
2025-02-05 16:09:40.237 -05:00 [INF] HTTP OPTIONS /api/Control/ValidarToken responded 204 in 0.2902 ms
2025-02-05 16:09:40.237 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4NzkwMzgwfQ.ukk1jd3TSx_n4fSZW9l_DcJ3EAKg1KxqEp0GY1UfmBg - 204 null null 1.1454ms
2025-02-05 16:09:40.238 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5925/api/Control/login - 200 null application/json; charset=utf-8 2083.9955ms
2025-02-05 16:09:40.242 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4NzkwMzgwfQ.ukk1jd3TSx_n4fSZW9l_DcJ3EAKg1KxqEp0GY1UfmBg - null null
2025-02-05 16:09:40.242 -05:00 [INF] CORS policy execution successful.
2025-02-05 16:09:40.265 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 16:09:40.271 -05:00 [INF] Route matched with {action = "ValidarToken", controller = "Control"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ValidarToken(System.String) on controller API_Secure.Controllers.Control (API-Secure).
2025-02-05 16:09:40.283 -05:00 [INF] Validando token JWT.
2025-02-05 16:09:40.287 -05:00 [INF] Validando token JWT.
2025-02-05 16:09:40.315 -05:00 [INF] Token validado exitosamente.
2025-02-05 16:09:40.315 -05:00 [INF] Token validado exitosamente.
2025-02-05 16:09:40.316 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-05 16:09:40.320 -05:00 [INF] Executed action API_Secure.Controllers.Control.ValidarToken (API-Secure) in 48.2991ms
2025-02-05 16:09:40.320 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.Control.ValidarToken (API-Secure)'
2025-02-05 16:09:40.320 -05:00 [INF] HTTP GET /api/Control/ValidarToken responded 200 in 77.9404 ms
2025-02-05 16:09:40.322 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/Control/ValidarToken?token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IlBFRFJPIiwiZXhwIjoxNzM4NzkwMzgwfQ.ukk1jd3TSx_n4fSZW9l_DcJ3EAKg1KxqEp0GY1UfmBg - 200 null application/json; charset=utf-8 79.8362ms
2025-02-05 16:09:40.356 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - null null
2025-02-05 16:09:40.357 -05:00 [INF] CORS policy execution successful.
2025-02-05 16:09:40.357 -05:00 [INF] HTTP OPTIONS /api/personas/Lista responded 204 in 0.4955 ms
2025-02-05 16:09:40.358 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Lista - 204 null null 2.1078ms
2025-02-05 16:09:40.364 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/api/personas/Lista - null null
2025-02-05 16:09:40.366 -05:00 [INF] CORS policy execution successful.
2025-02-05 16:09:40.375 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 16:09:40.383 -05:00 [INF] Route matched with {action = "Lista", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Lista(Int32, Int32) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 16:09:40.396 -05:00 [INF] Obteniendo lista de personas.
2025-02-05 16:09:40.516 -05:00 [INF] Executed DbCommand (11ms) [Parameters=[p0='?' (DbType = Int32), p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC ConsultarPersonas @PageNumber = @p0, @PageSize = @p1
2025-02-05 16:09:40.565 -05:00 [INF] Lista de personas obtenida exitosamente.
2025-02-05 16:09:40.565 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[API_Secure.Models.Persona, API-Secure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-05 16:09:40.579 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Lista (API-Secure) in 196.0864ms
2025-02-05 16:09:40.580 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Lista (API-Secure)'
2025-02-05 16:09:40.580 -05:00 [INF] HTTP GET /api/personas/Lista responded 200 in 214.4013 ms
2025-02-05 16:09:40.581 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/api/personas/Lista - 200 null application/json; charset=utf-8 216.8268ms
2025-02-05 16:10:13.138 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/20 - null null
2025-02-05 16:10:13.139 -05:00 [INF] CORS policy execution successful.
2025-02-05 16:10:13.139 -05:00 [INF] HTTP OPTIONS /api/personas/Actualizar/20 responded 204 in 0.6401 ms
2025-02-05 16:10:13.141 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Actualizar/20 - 204 null null 3.3878ms
2025-02-05 16:10:13.146 -05:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/20 - application/json 292
2025-02-05 16:10:13.148 -05:00 [INF] CORS policy execution successful.
2025-02-05 16:10:13.194 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 16:10:13.209 -05:00 [INF] Route matched with {action = "Actualizar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Actualizar(Int32, API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 16:10:13.280 -05:00 [INF] Actualizando persona con ID: 20
2025-02-05 16:10:13.480 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Identificador], [p].[Apellidos], [p].[Email], [p].[FechaCreacion], [p].[Nombres], [p].[NombresApellidos], [p].[NumeroIdentificacion], [p].[NumeroIdentificacionConTipo], [p].[TipoIdentificacion]
FROM [Personas] AS [p]
WHERE [p].[Identificador] = @__p_0
2025-02-05 16:10:13.484 -05:00 [INF] request.
2025-02-05 16:10:13.605 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Personas] SET [Apellidos] = @p0, [Email] = @p1, [FechaCreacion] = @p2, [Nombres] = @p3, [NumeroIdentificacion] = @p4, [TipoIdentificacion] = @p5
OUTPUT INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
WHERE [Identificador] = @p6;
2025-02-05 16:10:13.639 -05:00 [INF] Persona con ID 20 actualizada exitosamente.
2025-02-05 16:10:13.639 -05:00 [INF] Executing OkObjectResult, writing value of type 'API_Secure.Models.Persona'.
2025-02-05 16:10:13.640 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Actualizar (API-Secure) in 430.7468ms
2025-02-05 16:10:13.641 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Actualizar (API-Secure)'
2025-02-05 16:10:13.641 -05:00 [INF] HTTP PUT /api/personas/Actualizar/20 responded 200 in 493.4144 ms
2025-02-05 16:10:13.641 -05:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5925/api/personas/Actualizar/20 - 200 null application/json; charset=utf-8 495.1415ms
2025-02-05 16:10:22.795 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Agregar - null null
2025-02-05 16:10:22.795 -05:00 [INF] CORS policy execution successful.
2025-02-05 16:10:22.795 -05:00 [INF] HTTP OPTIONS /api/personas/Agregar responded 204 in 0.2212 ms
2025-02-05 16:10:22.796 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Agregar - 204 null null 1.0756ms
2025-02-05 16:10:22.798 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5925/api/personas/Agregar - application/json 143
2025-02-05 16:10:22.798 -05:00 [INF] CORS policy execution successful.
2025-02-05 16:10:22.800 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Agregar (API-Secure)'
2025-02-05 16:10:22.804 -05:00 [INF] Route matched with {action = "Agregar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Agregar(API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 16:10:22.830 -05:00 [INF] Agregando nueva persona.
2025-02-05 16:10:22.841 -05:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-02-05 16:10:22.847 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Agregar (API-Secure) in 43.6782ms
2025-02-05 16:10:22.848 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Agregar (API-Secure)'
2025-02-05 16:10:22.848 -05:00 [INF] HTTP POST /api/personas/Agregar responded 400 in 49.3379 ms
2025-02-05 16:10:22.849 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5925/api/personas/Agregar - 400 null text/plain; charset=utf-8 50.9068ms
2025-02-05 16:10:35.843 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Agregar - null null
2025-02-05 16:10:35.843 -05:00 [INF] CORS policy execution successful.
2025-02-05 16:10:35.844 -05:00 [INF] HTTP OPTIONS /api/personas/Agregar responded 204 in 0.3260 ms
2025-02-05 16:10:35.845 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Agregar - 204 null null 1.3317ms
2025-02-05 16:10:35.847 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5925/api/personas/Agregar - application/json 143
2025-02-05 16:10:35.847 -05:00 [INF] CORS policy execution successful.
2025-02-05 16:10:35.848 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Agregar (API-Secure)'
2025-02-05 16:10:35.848 -05:00 [INF] Route matched with {action = "Agregar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Agregar(API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 16:10:35.849 -05:00 [INF] Agregando nueva persona.
2025-02-05 16:10:35.849 -05:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-02-05 16:10:35.850 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Agregar (API-Secure) in 1.9436ms
2025-02-05 16:10:35.850 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Agregar (API-Secure)'
2025-02-05 16:10:35.850 -05:00 [INF] HTTP POST /api/personas/Agregar responded 400 in 3.5157 ms
2025-02-05 16:10:35.851 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5925/api/personas/Agregar - 400 null text/plain; charset=utf-8 4.0308ms
2025-02-05 16:10:49.139 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Agregar - null null
2025-02-05 16:10:49.139 -05:00 [INF] CORS policy execution successful.
2025-02-05 16:10:49.139 -05:00 [INF] HTTP OPTIONS /api/personas/Agregar responded 204 in 0.5506 ms
2025-02-05 16:10:49.140 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5925/api/personas/Agregar - 204 null null 1.768ms
2025-02-05 16:10:49.142 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5925/api/personas/Agregar - application/json 164
2025-02-05 16:10:49.142 -05:00 [INF] CORS policy execution successful.
2025-02-05 16:10:49.143 -05:00 [INF] Executing endpoint 'API_Secure.Controllers.PersonasController.Agregar (API-Secure)'
2025-02-05 16:10:49.143 -05:00 [INF] Route matched with {action = "Agregar", controller = "Personas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Agregar(API_Secure.Models.Persona) on controller API_Secure.Controllers.PersonasController (API-Secure).
2025-02-05 16:10:49.144 -05:00 [INF] Agregando nueva persona.
2025-02-05 16:10:49.192 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (Size = 100), @p3='?' (Size = 20), @p4='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Personas] ([Apellidos], [Email], [Nombres], [NumeroIdentificacion], [TipoIdentificacion])
OUTPUT INSERTED.[Identificador], INSERTED.[FechaCreacion], INSERTED.[NombresApellidos], INSERTED.[NumeroIdentificacionConTipo]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-02-05 16:10:49.204 -05:00 [INF] Persona agregada exitosamente.
2025-02-05 16:10:49.204 -05:00 [INF] Executing OkObjectResult, writing value of type 'API_Secure.Models.Persona'.
2025-02-05 16:10:49.205 -05:00 [INF] Executed action API_Secure.Controllers.PersonasController.Agregar (API-Secure) in 62.2276ms
2025-02-05 16:10:49.205 -05:00 [INF] Executed endpoint 'API_Secure.Controllers.PersonasController.Agregar (API-Secure)'
2025-02-05 16:10:49.205 -05:00 [INF] HTTP POST /api/personas/Agregar responded 200 in 63.2729 ms
2025-02-05 16:10:49.206 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5925/api/personas/Agregar - 200 null application/json; charset=utf-8 63.898ms
2025-02-05 16:16:19.448 -05:00 [INF] User profile is available. Using 'C:\Users\Developer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-05 16:16:19.595 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5925/weatherforecast - null null
2025-02-05 16:16:19.680 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-05 16:16:19.680 -05:00 [INF] Hosting environment: Development
2025-02-05 16:16:19.680 -05:00 [INF] Content root path: C:\Users\Developer\source\repos\API-Secure
2025-02-05 16:16:19.728 -05:00 [INF] HTTP GET /weatherforecast responded 404 in 39.7180 ms
2025-02-05 16:16:19.752 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5925/weatherforecast - 404 null null 158.383ms
2025-02-05 16:16:19.761 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5925/weatherforecast, Response status code: 404
